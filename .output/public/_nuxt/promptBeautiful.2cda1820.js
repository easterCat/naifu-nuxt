import e from"./AreaTitle.fd636338.js";import{J as a,K as l,_ as t,I as s,a$ as n,r as o,x as r,a2 as u,a0 as c,u as i,Y as m,aC as v,ba as p,C as b,a4 as d,$ as g,X as f,L as h,ap as y,aX as C,aY as k,aZ as _}from"./entry.867af431.js";import{u as w,a as x}from"./shop.e35e1083.js";import{_ as j}from"./delete.b5254baa.js";import{_ as z}from"./document-copy.a9c0c615.js";import{g as S,s as V,t as $,c as J}from"./element-plus.bb8e70a3.js";/* empty css                                                                  */import"./lodash.ea4d81e6.js";const Y={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},N=[t("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1)];const O={name:"ep-check",render:function(e,t){return a(),l("svg",Y,N)}},H={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},M=[t("path",{fill:"currentColor",d:"M384 960v-64h192.064v64H384zm448-544a350.656 350.656 0 0 1-128.32 271.424C665.344 719.04 640 763.776 640 813.504V832H320v-14.336c0-48-19.392-95.36-57.216-124.992a351.552 351.552 0 0 1-128.448-344.256c25.344-136.448 133.888-248.128 269.76-276.48A352.384 352.384 0 0 1 832 416zm-544 32c0-132.288 75.904-224 192-224v-64c-154.432 0-256 122.752-256 288h64z"},null,-1)];const A={name:"ep-opportunity",render:function(e,t){return a(),l("svg",H,M)}},B=e=>(C("data-v-eb5c4bb4"),e=e(),k(),e),L={class:"tranfer-con"},D={key:0,class:"tags-con"},I=["onClose"],P={key:1,class:"tags-con"},R=[B((()=>t("p",{class:"no-data"},"暂无列表",-1)))],T={class:"title-side"},U={key:2,class:"history-con"},X={style:{"font-weight":"bold","margin-bottom":"4px"}},q={class:"history-button"},K=["onClick"],Z=["onClick"],E=["onClick"],F={key:3,class:"tags-con"},G=[B((()=>t("p",{class:"no-data"},"暂无记录",-1)))],Q=_(s({__name:"promptBeautiful",setup(s){const C="prompt_history",{$store:k}=n(),_=o(""),Y=o(""),N=o([]),H=o([]),M=o(0),{copy:B}=w(),{shop:Q,setShop:W}=x();r((()=>{pe()}));const ee=()=>{Y.value=_.value.replace(/\s*(，+|,+)\s*/g,", "),N.value=Y.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ve(_.value)},ae=()=>{Y.value=_.value.replace(/\s+/g,", "),N.value=Y.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ve(_.value)},le=()=>{Y.value=_.value.replace(/[-_]+/g," "),N.value=Y.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ve(_.value)},te=()=>{Y.value=_.value.replace(/\{/g,"(").replace(/\}/g,")"),N.value=Y.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),ve(_.value)},se=()=>{Y.value=_.value.replace(/\(/g,"{").replace(/\)/g,"}"),N.value=Y.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),ve(_.value)},ne=()=>{_.value=Q.value,Y.value=_.value.replace(/\s*(，+|,+)\s*/g,","),N.value=Y.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ve(_.value)},oe=()=>{W(Y.value)},re=()=>{be(),H.value=[]},ue=()=>{if(_.value.includes("masterpiece"))return J({showClose:!0,message:"请不要重复添加",type:"warning"});_.value=`masterpiece, best quality, ${_.value}`,Y.value=_.value.replace(/\s*(，+|,+)\s*/g,","),N.value=Y.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ve(_.value)},ce=()=>{_.value="",Y.value="",N.value=[]},ie=()=>{_.value=N.value.join(", "),Y.value=N.value.join(", ")},me=()=>{B(Y.value)},ve=e=>{var a;let l=[];if(!e)return J({showClose:!0,message:"请输入prompt",type:"warning"});k.get(C)&&(l=null!=(a=JSON.parse(k.get(C)))?a:[]);if(!l.find((a=>a.prompt===e))){if(l&&l.length&&l.length>100)return J({showClose:!0,message:"数据超过100条",type:"warning"});l.includes(e)||l.unshift({prompt:e,time:p().format("YYYY年MM月DD日 HH时mm分ss秒")}),H.value=[...l],M.value=H.value.length,k.set(C,JSON.stringify(H.value))}},pe=()=>{k.get(C)&&(H.value=JSON.parse(k.get(C)),M.value=H.value.length)},be=()=>{k.set(C,"")};return(s,n)=>{var o,r;const p=S,w=V,x=$,J=e,Q=A,W=O,ve=z,pe=j;return a(),l("div",L,[t("div",{class:"button-con"},[t("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ee},"格式化"),t("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ce},"清空"),t("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:te}," 大括号转圆括号 "),t("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:se}," 圆括号转大括号 "),t("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ue}," 起手式 "),t("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ne},"购物车导入"),t("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:oe},"导出购物车"),t("button",{class:"btn btn-secondary m-r-10 m-b-10",onClick:ae}," 空格加逗号(用于danbooru) "),t("button",{class:"btn btn-secondary m-b-10",onClick:le}," 去除下划线(用于danbooru) ")]),u(x,{gutter:20},{default:c((()=>[u(w,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[u(p,{modelValue:i(_),"onUpdate:modelValue":n[0]||(n[0]=e=>b(_)?_.value=e:null),type:"textarea",placeholder:"请输入promit",rows:12,clearable:"",autosize:{minRows:12},"show-word-limit":"",maxlength:"3000"},null,8,["modelValue"])])),_:1}),u(w,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[u(p,{modelValue:i(Y),"onUpdate:modelValue":n[1]||(n[1]=e=>b(Y)?Y.value=e:null),type:"textarea",placeholder:"输出prompt",rows:12,autosize:{minRows:12},readonly:"","show-word-limit":"",maxlength:"3000",onClick:me},null,8,["modelValue"])])),_:1})])),_:1}),u(J,{title:"Prompt列表"}),i(N)&&(null==(o=i(N))?void 0:o.length)?(a(),l("div",D,[t("div",{class:"m-b-10"},[t("button",{class:"btn btn-md btn-accent",onClick:ie}," 当前tags替换prompt ")]),(a(!0),l(m,null,v(i(N),((e,t)=>(a(),l("button",{key:t,class:"btn btn-sm btn-secondary m-r-10 m-b-10",onClose:e=>{return a=t,void N.value.splice(a,1);var a}},d(e),41,I)))),128))])):(a(),l("div",P,R)),u(J,{title:"Prompt记录"},{titleSide:c((()=>[t("span",T,"总数:"+d(i(M))+"条",1)])),_:1}),i(H)&&(null==(r=i(H))?void 0:r.length)?(a(),l("div",U,[t("div",{class:"button-con"},[t("button",{class:"btn btn-md btn-accent m-b-15",onClick:re},"清空历史")]),(a(!0),l(m,null,v(i(H),((e,n)=>(a(),l("div",{key:n,class:"history-item"},[t("p",X,[0===n?(a(),g(Q,{key:0,style:{color:"#67c23a","font-size":"12px"}})):f("",!0),t("span",null,d(null==e?void 0:e.time),1)]),t("p",null,d(null==e?void 0:e.prompt),1),t("div",q,[t("button",{class:"btn btn-sm btn-primary m-r-10",onClick:a=>{return l=null==e?void 0:e.prompt,void(_.value=l);var l}},[h(s.$slots,"icon",{},(()=>[u(W,{class:"m-r-4"})]),!0),y(" 选择 ")],8,K),t("button",{class:"btn btn-sm btn-accent m-r-10",onClick:a=>i(B)(null==e?void 0:e.prompt)},[h(s.$slots,"icon",{},(()=>[u(ve,{class:"m-r-4"})]),!0),y(" 复制 ")],8,Z),t("button",{class:"btn btn-sm btn-secondary",onClick:e=>(e=>{var a;const l=null!=(a=JSON.parse(k.get(C)))?a:[];l.splice(e,1),H.value=[...l],M.value=0,k.set(C,JSON.stringify(H.value))})(n)},[h(s.$slots,"icon",{},(()=>[u(pe,{class:"m-r-4"})]),!0),y(" 删除 ")],8,E)])])))),128))])):(a(),l("div",F,G))])}}}),[["__scopeId","data-v-eb5c4bb4"]]);export{Q as default};
