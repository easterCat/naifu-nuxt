import e from"./AreaTitle.1e0e7e18.js";import{u as a}from"./pinia.7ac5f2a7.js";import{u as l,a as t}from"./shop.8f25176c.js";import{F as s,G as n,W as o,e as r,a as u,f as c,H as i,I as m,u as p,Y as v,Z as b,$ as d,i as g,U as f,L as y,_ as h,a3 as k,a2 as C,a0 as _,a1 as w}from"./element-plus.3e7898c2.js";import{_ as j}from"./document-copy.9ed563a4.js";import{_ as x}from"./delete.3a3a4f9c.js";import{_ as S}from"./opportunity.6a6909c9.js";import{d as E}from"./dayjs.3bf4ac2a.js";import{_ as M}from"./entry.cf5e7fb4.js";/* empty css                                                                  */import"./lodash.93025024.js";import"./store.e5acb8cd.js";const V={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},$=[o("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1)];const J={name:"ep-check",render:function(e,a){return s(),n("svg",V,$)}},N=e=>(_("data-v-21e55eaa"),e=e(),w(),e),O={class:"tranfer-con"},Y={key:0,class:"tags-con"},z=["onClose"],H={key:1,class:"tags-con"},I=[N((()=>o("p",{class:"no-data"},"暂无列表",-1)))],L={class:"title-side"},R={key:2,class:"history-con"},U={style:{"font-weight":"bold","margin-bottom":"4px"}},A={class:"history-button"},B=["onClick"],D=["onClick"],P=["onClick"],T={key:3,class:"tags-con"},q=[N((()=>o("p",{class:"no-data"},"暂无记录",-1)))],F=M(r({__name:"promptBeautiful",setup(r){const _="prompt_history",{$store:w}=a(),M=u(""),V=u(""),$=u([]),N=u([]),F=u(0),{copy:G}=l(),{shop:W,setShop:Z}=t();c((()=>{ie()}));const K=()=>{V.value=M.value.replace(/\s*(，+|,+)\s*/g,", "),$.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(M.value)},Q=()=>{V.value=M.value.replace(/\s+/g,", ").replace(/\s*(，+|,+)\s*/g,", "),$.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(M.value)},X=()=>{V.value=M.value.replace(/[-_]+/g," ").replace(/\s*(，+|,+)\s*/g,", "),$.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(M.value)},ee=()=>{V.value=M.value.replace(/\{/g,"(").replace(/\}/g,")").replace(/\s*(，+|,+)\s*/g,", "),$.value=V.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),ce(M.value)},ae=()=>{V.value=M.value.replace(/\(/g,"{").replace(/\)/g,"}").replace(/\s*(，+|,+)\s*/g,", "),$.value=V.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),ce(M.value)},le=()=>{M.value=W.value,V.value=M.value.replace(/\s*(，+|,+)\s*/g,","),$.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(M.value)},te=()=>{Z(V.value)},se=()=>{me(),N.value=[]},ne=()=>{if(M.value.includes("masterpiece"))return d.ElMessage({showClose:!0,message:"请不要重复添加",type:"warning"});M.value=`masterpiece, best quality, ${M.value}`,V.value=M.value.replace(/\s*(，+|,+)\s*/g,","),$.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(M.value)},oe=()=>{M.value="",V.value="",$.value=[]},re=()=>{M.value=$.value.join(", "),V.value=$.value.join(", ")},ue=()=>{G(V.value)},ce=e=>{var a;let l=[];if(!e)return d.ElMessage({showClose:!0,message:"请输入prompt",type:"warning"});w.get(_)&&(l=null!=(a=JSON.parse(w.get(_)))?a:[]);if(!l.find((a=>a.prompt===e))){if(l&&l.length&&l.length>100)return d.ElMessage({showClose:!0,message:"数据超过100条",type:"warning"});l.includes(e)||l.unshift({prompt:e,time:E().format("YYYY年MM月DD日 HH时mm分ss秒")}),N.value=[...l],F.value=N.value.length,w.set(_,JSON.stringify(N.value))}},ie=()=>{w.get(_)&&(N.value=JSON.parse(w.get(_)),F.value=N.value.length)},me=()=>{w.set(_,"")};return(a,l)=>{var t,r;const u=d.ElInput,c=d.ElCol,E=d.ElRow,W=e,Z=S,ce=x,ie=j,me=J;return s(),n("div",O,[o("div",{class:"button-con"},[o("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:K},"格式化"),o("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:oe},"清空"),o("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ee}," 大括号转圆括号 "),o("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ae}," 圆括号转大括号 "),o("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ne}," 起手式 "),o("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:le},"购物车导入"),o("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:te},"导出购物车"),o("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:Q}," 空格加逗号(用于danbooru) "),o("button",{class:"btn btn-accent m-b-10",onClick:X}," 去除下划线(用于danbooru) ")]),i(E,{gutter:20},{default:m((()=>[i(c,{xs:24,sm:12,md:12,lg:12,xl:12},{default:m((()=>[i(u,{modelValue:p(M),"onUpdate:modelValue":l[0]||(l[0]=e=>g(M)?M.value=e:null),type:"textarea",placeholder:"请输入promit",rows:12,clearable:"",autosize:{minRows:12},"show-word-limit":"",maxlength:"3000"},null,8,["modelValue"])])),_:1}),i(c,{xs:24,sm:12,md:12,lg:12,xl:12},{default:m((()=>[i(u,{modelValue:p(V),"onUpdate:modelValue":l[1]||(l[1]=e=>g(V)?V.value=e:null),type:"textarea",placeholder:"输出prompt",rows:12,autosize:{minRows:12},readonly:"","show-word-limit":"",maxlength:"3000",onClick:ue},null,8,["modelValue"])])),_:1})])),_:1}),i(W,{title:"Prompt列表"}),p($)&&(null==(t=p($))?void 0:t.length)?(s(),n("div",Y,[o("div",{class:"m-b-10"},[o("button",{class:"btn btn-md btn-accent",onClick:re}," 当前tags替换prompt ")]),(s(!0),n(v,null,b(p($),((e,a)=>(s(),n("button",{key:a,class:"btn btn-sm btn-secondary m-r-10 m-b-10",onClose:e=>{return l=a,void $.value.splice(l,1);var l}},f(e),41,z)))),128))])):(s(),n("div",H,I)),i(W,{title:"Prompt记录"},{titleSide:m((()=>[o("span",L,"总数:"+f(p(F))+"条",1)])),_:1}),p(N)&&(null==(r=p(N))?void 0:r.length)?(s(),n("div",R,[o("div",{class:"button-con"},[o("button",{class:"btn btn-md btn-accent m-b-15",onClick:se},"清空历史")]),(s(!0),n(v,null,b(p(N),((e,l)=>(s(),n("div",{key:l,class:"history-item"},[o("p",U,[0===l?(s(),y(Z,{key:0,style:{color:"#67c23a","font-size":"12px"}})):h("",!0),o("span",null,f(null==e?void 0:e.time),1)]),o("p",null,f(null==e?void 0:e.prompt),1),o("div",A,[o("button",{class:"btn btn-sm btn-secondary m-r-10",onClick:e=>(e=>{var a;const l=null!=(a=JSON.parse(w.get(_)))?a:[];l.splice(e,1),N.value=[...l],F.value=0,w.set(_,JSON.stringify(N.value))})(l)},[k(a.$slots,"icon",{},(()=>[i(ce,{class:"m-r-4"})]),!0),C(" 删除 ")],8,B),o("button",{class:"btn btn-sm btn-accent m-r-10",onClick:a=>p(G)(null==e?void 0:e.prompt)},[k(a.$slots,"icon",{},(()=>[i(ie,{class:"m-r-4"})]),!0),C(" 复制 ")],8,D),o("button",{class:"btn btn-sm btn-primary m-r-10",onClick:a=>{return l=null==e?void 0:e.prompt,void(M.value=l);var l}},[k(a.$slots,"icon",{},(()=>[i(me,{class:"m-r-4"})]),!0),C(" 选择 ")],8,P)])])))),128))])):(s(),n("div",T,q))])}}}),[["__scopeId","data-v-21e55eaa"]]);export{F as default};
