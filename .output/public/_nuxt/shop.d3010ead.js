import{u as e,l as t}from"./pinia.17670579.js";import{a4 as o,a8 as a,a9 as s}from"./element-plus.fe53e503.js";import{c as n}from"./vue3-clipboard-es.62b9b053.js";const l=()=>({copy:e=>{const t=e?e.trim():"";n(t,void 0,(e=>{if(!e)return o.ElMessage({showClose:!0,message:"复制成功",type:"success"});console.log(e)}))}});let u=null;function c(e){return u&&u.close(),u=a({showClose:!0,message:e,type:"success",duration:1500}),u}function r(e){return u&&u.close(),u=a({showClose:!0,message:e,type:"warning",duration:1500}),u}function p(e){return u&&u.close(),u=a({showClose:!0,message:e,type:"error",duration:1500}),u}const i=()=>{const{$store:o}=e(),{copy:a}=l(),n="shop",u=t("shop",(()=>"")),p=t("shopList",(()=>[])),i=()=>{u.value=o.get(n)||"",u.value?h():p.value=[]};function v(){o.set(n,u.value)}function m(){u.value=p.value.map((e=>e.text)).join(",")}function h(){p.value=u.value.split(",").map((e=>({text:e.trim()})))}return i(),{shop:u,shopList:p,initShop:i,setShop:e=>(u.value=e,h(),v(),c("初始化购物车")),onlySetShop:e=>{u.value=e,v()},clearShop:()=>{s.alert("确定清空购物车","提示",{confirmButtonText:"确定",callback:e=>{if("confirm"===e)return u.value="",p.value=[],o.remove(n),c("清空购物车")}})},addShop:e=>e?u.value.includes(e)?r("购物车已存在该标签"):(p.value.push({text:e}),m(),v(),c("添加购物车成功")):r("错误数据"),removeShop:e=>(p.value.splice(e,1),m(),v(),c("删除成功")),removeShopByName:e=>{const t=p.value.findIndex((t=>t.text===e));return p.value.splice(t,1),m(),v(),c("删除成功")},renameShopName:e=>{s.prompt("请输入新内容","修改",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then((({value:t})=>{const o=p.value.findIndex((t=>t.text===e));p.value[o].text=t,m(),v()})).catch((()=>{console.log("取消创建 :>> ")}))},copyShop:()=>{a(u.value)},addOneCircle:e=>{const t=p.value.findIndex((t=>t.text===e)),o=`(${e})`;p.value.splice(t,1,o),m(),v()},removeOneCircle:e=>{const t=p.value.findIndex((t=>t.text===e)),o=e.replace("(","").replace(")","");p.value.splice(t,1,o),m(),v()},createNewShopItem:()=>{s.prompt("请输入标签内容","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then((({value:e})=>{p.value.push({text:e}),m(),v()})).catch((()=>{console.log("取消创建 :>> ")}))}}};export{i as a,p as e,l as u,r as w};
