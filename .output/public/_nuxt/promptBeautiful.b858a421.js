import e from"./AreaTitle.dc73a93c.js";import{u as t}from"./pinia.17670579.js";import{u as l,a}from"./shop.d3010ead.js";import{_ as s}from"./check.a62908c8.js";import{_ as n}from"./document-copy.d0e58c3c.js";import{_ as o}from"./delete.c5b0c1fb.js";import{_ as r}from"./opportunity.67839f21.js";import{e as u,a as c,f as i,G as m,H as p,Z as b,J as v,L as d,u as g,$ as f,a0 as y,a4 as h,i as k,W as C,N as _,a1 as j,I as w,_ as x,a5 as S,a6 as E}from"./element-plus.fe53e503.js";import{d as J}from"./dayjs.3bf4ac2a.js";import{_ as N}from"./entry.d71b1392.js";/* empty css                                                                  */import"./lodash.cb875ed5.js";import"./store.e5acb8cd.js";import"./vue3-clipboard-es.62b9b053.js";const V=e=>(S("data-v-14689905"),e=e(),E(),e),$={class:"tranfer-con"},M={key:0,class:"tags-con"},O=["onClose"],Y={key:1,class:"tags-con"},z=[V((()=>b("p",{class:"no-data"},"暂无列表",-1)))],H={class:"title-side"},I={key:2,class:"history-con"},R={style:{"font-weight":"bold","margin-bottom":"4px"}},A={class:"history-button"},D=["onClick"],P=["onClick"],T=["onClick"],U={key:3,class:"tags-con"},q=[V((()=>b("p",{class:"no-data"},"暂无记录",-1)))],B=N(u({__name:"promptBeautiful",setup(u){const S="prompt_history",{$store:E}=t(),N=c(""),V=c(""),B=c([]),G=c([]),L=c(0),{copy:W}=l(),{shop:Z,setShop:F}=a();i((()=>{ie()}));const K=()=>{V.value=N.value.replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},Q=()=>{V.value=N.value.replace(/\s+/g,", ").replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},X=()=>{V.value=N.value.replace(/[-_]+/g," ").replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},ee=()=>{V.value=N.value.replace(/\{/g,"(").replace(/\}/g,")").replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},te=()=>{V.value=N.value.replace(/\(/g,"{").replace(/\)/g,"}").replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},le=()=>{N.value=Z.value,V.value=N.value.replace(/\s*(，+|,+)\s*/g,","),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},ae=()=>{F(V.value)},se=()=>{me(),G.value=[]},ne=()=>{if(N.value.includes("masterpiece"))return h.ElMessage({showClose:!0,message:"请不要重复添加",type:"warning"});N.value=`masterpiece, best quality, ${N.value}`,V.value=N.value.replace(/\s*(，+|,+)\s*/g,","),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},oe=()=>{N.value="",V.value="",B.value=[]},re=()=>{N.value=B.value.join(", "),V.value=B.value.join(", ")},ue=()=>{W(V.value)},ce=e=>{var t;let l=[];if(!e)return h.ElMessage({showClose:!0,message:"请输入prompt",type:"warning"});E.get(S)&&(l=null!=(t=JSON.parse(E.get(S)))?t:[]);if(!l.find((t=>t.prompt===e))){if(l&&l.length&&l.length>100)return h.ElMessage({showClose:!0,message:"数据超过100条",type:"warning"});l.includes(e)||l.unshift({prompt:e,time:J().format("YYYY年MM月DD日 HH时mm分ss秒")}),G.value=[...l],L.value=G.value.length,E.set(S,JSON.stringify(G.value))}},ie=()=>{E.get(S)&&(G.value=JSON.parse(E.get(S)),L.value=G.value.length)},me=()=>{E.set(S,"")};return(t,l)=>{var a,u;const c=h.ElInput,i=h.ElCol,J=h.ElRow,Z=e,F=r,ce=o,ie=n,me=s;return m(),p("div",$,[b("div",{class:"button-con"},[b("button",{class:"btn btn-accent btn-sm m-r-10 m-b-10",onClick:K}," 格式化 "),b("button",{class:"btn btn-accent btn-sm m-r-10 m-b-10",onClick:oe},"清空"),b("button",{class:"btn btn-accent btn-sm m-r-10 m-b-10",onClick:ee}," 大括号转圆括号 "),b("button",{class:"btn btn-accent btn-sm m-r-10 m-b-10",onClick:te}," 圆括号转大括号 "),b("button",{class:"btn btn-accent btn-sm m-r-10 m-b-10",onClick:ne}," 起手式 "),b("button",{class:"btn btn-accent btn-sm m-r-10 m-b-10",onClick:le}," 购物车导入 "),b("button",{class:"btn btn-accent btn-sm m-r-10 m-b-10",onClick:ae}," 导出购物车 "),b("button",{class:"btn btn-accent btn-sm m-r-10 m-b-10",onClick:Q}," 空格加逗号(用于danbooru) "),b("button",{class:"btn btn-accent btn-sm m-b-10",onClick:X}," 去除下划线(用于danbooru) ")]),v(J,{gutter:20},{default:d((()=>[v(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:d((()=>[v(c,{modelValue:g(N),"onUpdate:modelValue":l[0]||(l[0]=e=>k(N)?N.value=e:null),type:"textarea",placeholder:"请输入promit",rows:12,clearable:"",autosize:{minRows:12},"show-word-limit":"",maxlength:"3000"},null,8,["modelValue"])])),_:1}),v(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:d((()=>[v(c,{modelValue:g(V),"onUpdate:modelValue":l[1]||(l[1]=e=>k(V)?V.value=e:null),type:"textarea",placeholder:"输出prompt",rows:12,autosize:{minRows:12},readonly:"","show-word-limit":"",maxlength:"3000",onClick:ue},null,8,["modelValue"])])),_:1})])),_:1}),v(Z,{title:"Prompt列表"}),g(B)&&(null==(a=g(B))?void 0:a.length)?(m(),p("div",M,[b("div",{class:"m-b-10"},[b("button",{class:"btn btn-md btn-accent",onClick:re}," 当前tags替换prompt ")]),(m(!0),p(f,null,y(g(B),((e,t)=>(m(),p("button",{key:t,class:"btn btn-sm btn-secondary m-r-10 m-b-10",onClose:e=>{return l=t,void B.value.splice(l,1);var l}},C(e),41,O)))),128))])):(m(),p("div",Y,z)),v(Z,{title:"Prompt记录"},{titleSide:d((()=>[b("span",H,"总数:"+C(g(L))+"条",1)])),_:1}),g(G)&&(null==(u=g(G))?void 0:u.length)?(m(),p("div",I,[b("div",{class:"button-con"},[b("button",{class:"btn btn-md btn-accent btn-sm m-b-15",onClick:se}," 清空历史 ")]),(m(!0),p(f,null,y(g(G),((e,l)=>(m(),p("div",{key:l,class:"history-item"},[b("p",R,[0===l?(m(),_(F,{key:0,style:{color:"#67c23a","font-size":"12px"}})):j("",!0),b("span",null,C(null==e?void 0:e.time),1)]),b("p",null,C(null==e?void 0:e.prompt),1),b("div",A,[b("button",{class:"btn btn-sm btn-secondary m-r-10",onClick:e=>(e=>{var t;const l=null!=(t=JSON.parse(E.get(S)))?t:[];l.splice(e,1),G.value=[...l],L.value=G.value.length,E.set(S,JSON.stringify(G.value))})(l)},[w(t.$slots,"icon",{},(()=>[v(ce,{class:"m-r-4"})]),!0),x(" 删除 ")],8,D),b("button",{class:"btn btn-sm btn-accent m-r-10",onClick:t=>g(W)(null==e?void 0:e.prompt)},[w(t.$slots,"icon",{},(()=>[v(ie,{class:"m-r-4"})]),!0),x(" 复制 ")],8,P),b("button",{class:"btn btn-sm btn-primary m-r-10",onClick:t=>{return l=null==e?void 0:e.prompt,void(N.value=l);var l}},[w(t.$slots,"icon",{},(()=>[v(me,{class:"m-r-4"})]),!0),x(" 选择 ")],8,T)])])))),128))])):(m(),p("div",U,q))])}}}),[["__scopeId","data-v-14689905"]]);export{B as default};
