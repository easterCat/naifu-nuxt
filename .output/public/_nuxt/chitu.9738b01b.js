import{I as e,a8 as l,b2 as t,r as a,x as o,B as n,J as i,K as s,a2 as c,_ as u,Y as m,aC as p,u as r,a0 as d,X as v,$ as _,Z as b,a4 as f,b4 as g,aZ as y}from"./entry.4f221c1e.js";import{_ as k,a as h}from"./AppHeader.3e760a59.js";import E from"./AppBanner.0d6be24a.js";import j from"./AreaTitle.0d279a50.js";import x from"./TemplateDetail.2db2faac.js";import{u as A,a as C}from"./shop.b77c0394.js";import{u as I}from"./index.c09eb981.js";import{_ as N}from"./document-copy.7c03cd07.js";import{_ as T}from"./shopping-trolley.585fddb0.js";import{l as V,m as w}from"./element-plus.20817160.js";import{l as z}from"./lodash.ea4d81e6.js";import"./AppAnimate.vue_vue_type_script_setup_true_lang.09dc1f9c.js";import"./plus.18186837.js";import"./vuedraggable.389c0f04.js";import"./sortablejs.8210fcbe.js";import"./FixMenu.vue_vue_type_style_index_0_scoped_5afae692_lang.192fbee9.js";/* empty css                                                                  */import"./copy-document.525e5e7f.js";const L={class:"chitu-tags-page page"},D={class:"content"},O={class:"type-list"},P={key:0,class:"tag-list"},R=["data-index"],S={key:0,class:"image-con"},H={class:"text-con"},U={key:0,class:"en"},B={key:1,class:"en"},Z={class:"button-con"},q=["onClick"],F=["onClick"],J={key:1,class:"tag-list"},K=["data-index"],M={key:0,class:"image-con"},X={class:"text-con"},Y={key:0,class:"en"},$={key:1,class:"en"},G={class:"button-con"},Q=["onClick"],W=["onClick"],ee={key:2,class:"tag-list"},le=["data-index"],te={key:0,class:"image-con"},ae={class:"text-con"},oe={key:0,class:"en"},ne={key:1,class:"en"},ie={class:"button-con"},se=["onClick"],ce=["onClick"],ue=y(e({__name:"chitu",setup(e){const{copy:y}=A(),{addShop:ue}=C(),{TemplateApi:me}=I(),pe=l([{name:"参考图",file:t((()=>import("./NovelAI_cankaotu.339f5bb2.js")),[],import.meta.url)},{name:"人物",file:t((()=>import("./NovelAI_huageren.afd84e06.js")),[],import.meta.url)},{name:"物体",file:t((()=>import("./NovelAI_huagewuti.7cbf7439.js")),[],import.meta.url)},{name:"构图",file:t((()=>import("./NovelAI_goutu.80a9b3d6.js")),[],import.meta.url)},{name:"画风",file:t((()=>import("./NovelAI_huafeng.72a3e915.js")),[],import.meta.url)},{name:"正面词组",file:t((()=>import("./NovelAI_zhengmiantag.3f260789.js")),[],import.meta.url)},{name:"负面词组",file:t((()=>import("./NovelAI_fumiantag.2f48f896.js")),[],import.meta.url)}]),re=a([]),de=a(0),ve=a(!0),_e=a(""),be=a({}),fe=a(!1),ge=a(1),ye=a(50),ke=a(window.document.body);let he=[],Ee=0;const je=async()=>{const e=await me.getTemplatesChitu({pageIndex:ge.value,pageSize:ye.value});re.value=[...re.value,...(null==e?void 0:e.templates)?e.templates:[]]},xe=e=>{de.value?(be.value={author:e.author,n_prompt:e.n_prompt,preview:e.preview,model:e.model,prompt:e.prompt,prompt_zh:e.prompt_zh,name:e.name,desc:e.desc},fe.value=!0):(be.value={name:e.name,author:e.author,preview:e.preview,prompt:e.prompt,prompt_zh:e.prompt_zh,n_prompt:e.n_prompt,model:e.model,desc:e.desc,like:e.like},fe.value=!0)},Ae=e=>{_e.value=e},Ce=()=>{re.value=re.value.concat(he.slice(50*Ee,50*(Ee+1)))},Ie=z.exports.throttle((()=>{const e=ke.value.scrollTop;ke.value.scrollHeight-(e+(document.documentElement.clientHeight||document.body.clientHeight))<=100&&(console.log("触底"),de.value?(Ee++,Ce()):(ge.value++,je()))}),1500);return o((async()=>{je(),ke.value=document.querySelector(".chitu-tags-page"),ke.value.addEventListener("scroll",Ie)})),n((()=>{ke.value.removeEventListener("scroll",Ie)})),(e,l)=>{const t=k,a=E,o=j,n=h,A=V,C=g,I=w,z=T,me=N,_e=x;return i(),s("div",L,[c(t),u("div",D,[c(a,{placeholder:"搜索标签",onSearchChange:Ae}),c(o,{title:"标签类别"}),u("div",O,[(i(!0),s(m,null,p(r(pe),((e,l)=>(i(),_(n,{key:l,index:l+"","button-style":1,"button-size":"larger",class:b([l===de.value?"btn-accent":"btn-secondary"]),"button-text":null==e?void 0:e.name,onSubmit:e=>(async e=>{Ee=0,ge.value=1,de.value?(de.value=e,re.value=[],he=(await pe[e].file).default,Ce()):je()})(l)},null,8,["index","class","button-text","onSubmit"])))),128))]),c(o,{title:"标签列表"},{titleSide:d((()=>[c(A,{modelValue:ve.value,"onUpdate:modelValue":l[0]||(l[0]=e=>ve.value=e),size:"large","inline-prompt":"","inactive-text":"隐藏Image","active-text":"开启Image",class:"title-side"},null,8,["modelValue"])])),_:1}),r(Ee)?(i(),s("div",P,[(i(!0),s(m,null,p(re.value,((e,l)=>{var t;return i(),s("div",{key:l,class:"tag-item-img ll-media bg-base-100","data-index":l},[ve.value&&5!==de.value&&6!==de.value?(i(),s("div",S,[c(C,{src:null!=(t=null==e?void 0:e.minify_preview)?t:"",loading:"lazy",onClick:l=>xe(e)},null,8,["src","onClick"])])):v("",!0),u("div",H,[c(I,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:d((()=>[(null==e?void 0:e.title)?(i(),s("p",U,f((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(i(),s("p",B,f((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),u("div",Z,[u("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:l=>r(ue)(null==e?void 0:e.promptEN)},[c(z)],8,q),u("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:l=>r(y)(null==e?void 0:e.promptEN)},[c(me)],8,F)])],8,R)})),128))])):v("",!0),de.value?(i(),s("div",J,[(i(!0),s(m,null,p(re.value,((e,l)=>(i(),s("div",{class:"tag-item-img ll-media bg-base-100","data-index":l,key:l},[ve.value&&5!==de.value&&6!==de.value?(i(),s("div",M,[(null==e?void 0:e.fileUrl)?(i(),_(C,{key:0,src:null==e?void 0:e.fileUrl,loading:"lazy",onClick:l=>xe(e)},null,8,["src","onClick"])):v("",!0)])):v("",!0),u("div",X,[c(I,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:d((()=>[(null==e?void 0:e.title)?(i(),s("p",Y,f((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(i(),s("p",$,f((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),u("div",G,[u("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:l=>r(ue)(null==e?void 0:e.promptEN)},[c(z)],8,Q),u("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:l=>r(y)(null==e?void 0:e.promptEN)},[c(me)],8,W)])],8,K)))),128))])):(i(),s("div",ee,[(i(!0),s(m,null,p(re.value,((e,l)=>(i(),s("div",{class:"tag-item-img ll-media bg-base-100","data-index":l,key:l},[ve.value&&5!==de.value&&6!==de.value?(i(),s("div",te,[(null==e?void 0:e.file1)?(i(),_(C,{key:0,src:null==e?void 0:e.file1,onClick:l=>xe(e)},null,8,["src","onClick"])):v("",!0)])):v("",!0),u("div",ae,[c(I,{class:"box-item",effect:"dark",content:null==e?void 0:e.prompt,placement:"top"},{default:d((()=>[(null==e?void 0:e.title)?(i(),s("p",oe,f((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(i(),s("p",ne,f((null==e?void 0:e.prompt.length)>24?(null==e?void 0:e.prompt.slice(0,24))+"...":null==e?void 0:e.prompt),1))])),_:2},1032,["content"])]),u("div",ie,[u("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:l=>r(ue)(null==e?void 0:e.prompt)},[c(z)],8,se),u("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:l=>r(y)(null==e?void 0:e.prompt)},[c(me)],8,ce)])],8,le)))),128))]))]),c(_e,{modelValue:fe.value,"onUpdate:modelValue":l[1]||(l[1]=e=>fe.value=e),"current-template":be.value},null,8,["modelValue","current-template"])])}}}),[["__scopeId","data-v-3b4c0ac4"]]);export{ue as default};
