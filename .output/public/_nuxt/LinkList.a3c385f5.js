import{J as e,K as l,_ as a,I as t,a_ as n,r as s,aT as i,x as o,aB as u,Y as d,aC as r,V as c,Z as v,u as p,ap as m,a4 as f,X as k,a2 as h,a0 as A,C as V,U as y,aX as b,aY as g,aZ as w}from"./entry.f0c30f1b.js";import{u as C}from"./index.251a9acf.js";import{I as j,h as W,i as R,j as U,k as I,c as L,g as T,l as J,b as x}from"./element-plus.51c032f9.js";import{_ as F}from"./delete.46596722.js";import"./FixMenu.vue_vue_type_style_index_0_scoped_5afae692_lang.46760c02.js";import"./lodash.ea4d81e6.js";const D={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},E=[a("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),a("path",{fill:"currentColor",d:"m469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1)];const M={name:"ep-edit",render:function(a,t){return e(),l("svg",D,E)}},N={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},S=[a("path",{fill:"currentColor",d:"M288 128h608L736 384l160 256H288v320h-96V64h96v64z"},null,-1)];const _={name:"ep-flag",render:function(a,t){return e(),l("svg",N,S)}},q={class:"link-con"},P={class:"link-left bg-base-100"},H={class:"link-right"},X={class:"part-list"},B=["data-title","data-index"],Z={class:""},O={class:"row"},z=["href"],Q=["src","alt"],G={key:0,class:"hot-link"},K={class:"opeartion"},Y={key:0,class:"icon"},$={key:1,class:"icon"},ee=(e=>(b("data-v-7a59aee2"),e=e(),g(),e))((()=>a("div",{style:{float:"right"}},"(hot,prompt,online,other)",-1))),le={class:"dialog-footer"},ae=w(t({__name:"LinkList",props:{filter:String},emits:["editEvent","deleteEvent"],async setup(t){let b,g;n().vueApp.provide(j,{prefix:Math.floor(1e3*Math.random()),current:0});const w=s(!1),{LinkApi:D}=C(),{links:E}=([b,g]=i((()=>D.getLinks())),b=await b,g(),b),N=s([{name:"",href:""}]),S=s([]),ae=s(0);N.value=E,S.value=[...new Set(E.map((e=>e.link_type)))];const te=s(!1),ne=s(!1),se=s(""),ie=s(),oe=s(""),ue=s(""),de=s(""),re=s(!1),ce=s(null),ve=async()=>{const{links:e}=await D.getLinks();N.value=e},pe=()=>{ne.value=!0,se.value="add"},me=()=>{ne.value=!1,se.value="",y((()=>{var e;null==(e=ie.value)||e.resetFields()}))},fe=()=>{"add"===se.value&&ke(),"edit"===se.value&&he()},ke=async()=>{if(200===(await D.addLink({name:oe.value,href:ue.value,type:de.value,hot:re.value})).code)return me(),y((()=>{ve()})),L({showClose:!0,message:"新建成功",type:"success"})},he=async()=>{if(200===(await D.updateLink({name:oe.value,href:ue.value,type:de.value,hot:re.value,id:ce.value})).code)return me(),y((()=>{ve()})),L({showClose:!0,message:"更新成功",type:"success"})};return o((()=>{const e=localStorage.getItem("edit");e&&(w.value=!0),e&&(te.value=!0)})),(t,n)=>{const s=_,i=W,o=M,b=F,g=T,C=R,j=J,E=U,ke=x,he=I,Ae=u("scroll-to");return e(),l("div",q,[a("div",P,[a("ul",null,[(e(!0),l(d,null,r(p(S),((a,t)=>c((e(),l("li",{key:t,class:v({active:p(ae)===t})},[m(f(a),1)],2)),[[Ae,{target:`.part:nth-child(${t+1}) > h2`,container:".link-right",behavior:"smooth",cb:e=>(e=>{ae.value=e})(e||0===e?e:t)}]]))),128)),p(te)?(e(),l("button",{key:0,class:"btn-primary btn-block btn",onClick:pe},"新增链接")):k("",!0)])]),a("div",H,[a("div",X,[(e(!0),l(d,null,r(p(S),((t,n)=>{return e(),l("div",{key:t,id:"media",class:"part","data-title":t,"data-index":n},[a("h2",Z,[a("strong",null,f(t),1)]),a("div",O,[(e(!0),l(d,null,r((u=t,u?[...N.value.filter((e=>e.link_type===u))]:[]),((t,n)=>{var u;return e(),l("div",{key:n,class:"item bg-base-100"},[a("a",{href:null==t?void 0:t.href,target:"_blank"},[a("h3",null,[a("img",{src:null!=(u=null==t?void 0:t.icon)?u:p("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhBAMAAADMnc9JAAAAG1BMVEX///8AAACamprq6urR0dFOTk62trYsLCx2dnZWDjm5AAAEMUlEQVR42u2cTVMTQRCGN9lJNsdMQj6OWUspj+FTj0mpeHW56DFBSj2yWhTXBKX425pcVDIN07PdLxTM+wPy1Mx2v9PTPZAkUVFRUVFPVHs4VHr08qNda3B+eTpW5x1e2f91vj3R5O0W1qHjz1o8c20JHeusc9feol8KwHf2Vn0Xj6H39g71JmDgn2SZSQIPrMUiW9ZLA7GNNdZTPanwyX2JtiMDbFh//YDu6VojAeKURexVBzYtT1uViXMm0c7AS6wer1M2sWLwGD6w4iJrAcRqX7IIIW7pW/hNjaFxs9JZODEMWCF26oFEG3xQ7oQSz6CRWmVbjQ1WIDELJ46gubFSN4xYkkXb5fbp26Nn19If0tx5yTAvZD8kYXHDic/1ZyaXjTfuF5RJfJArU2d+F4SuWOBs/tJSLHScgTPwNd+elI27DHMpFayZ71mbSR0frlDtOzs8Uj6Xe8d8LpQehfdWOQu+tkjFMWTEWFckObqMcohfQrouHAvGJ++I+PiYEdZDiXQccu7tfGKN8Wnqfn7ILznIgE9FbG7uHzjuYJWwnAnLLdjEJec3cokLVsE58kSIJSenpxJElm9JEFOWNysR23DiGY8ocFg9KOJcgNhkVS65gJMbjq26XI59WqWselDkfCwZRm58S1vm2cG7MPArqyljmzKRerVR0Vb5TaQmIzkKy4ps358Z826aAY2AHe/TMRO6PzarOE7YpCX3NC1n7dgPIdY9l5jJtcnmfp7l7AMsgohp6RN5Tckusik8LvVz0RGdWe9Yb8YebPWTYO2ffHkT0EurMH8IbFBO9Iju5v1QDzgVbVoHtick5qzM5BcZXxN6RSyxrQU0CtPAkLa2xICe0cVRjZu01H1O4p2KMk87vFucqktcor8iGTZ9rSWW4iNkfi9UORfJyaSW3VCGGjaSq/IV1U7iDJ0ZZC6qhU3dog9iylEXCTg11NyGfCY0Rm+qWipSRXFHD2jgdX9L7xkpoRr4okEEzkiTmENTkQrVmSoRvkQDNVTiythTBbrSsatLbKDjxmEAgwRN7CsTp8huEUEcKRNz4NlPELUDZ7NW7WgTC3Sobl45unBiW5to0cQUWacSxIUy0TwAorbJNR8AcfboiPUnQIyKioqKUql2Tq4uLj49xwEPC8cfCWnqNfqoqqNPR4PsrKw1B00c6LJDPXpy2FiFrKy0+wCcP1BQuj4qd6zdbfkJeFOVm1aFBbeQ3dOVAfozqn7IGnrwSI3l2kCLUze6Aj1dTdDPAEii3rGcUq85wAZwH0T7iHY1hUfOPWRHadFvAZZwl5vDnbwGf9LRQj8CpixAs7IqwaFKhI5qUd6AP+pIwcWju9JRHs614M8B7mHi2UDPdDbcXH2JN6c6ak9k/9UBdk9X+voX+BPUmPuGBibJ/vofICn9o1fK7vb2kqioqKioJ6nfJt2wB3VsdPcAAAAASUVORK5CYII="),alt:null==t?void 0:t.name},null,8,Q),a("span",null,f(t.name),1),(null==t?void 0:t.hot)?(e(),l("i",G,[h(i,{color:"red"},{default:A((()=>[h(s)])),_:1})])):k("",!0)]),a("p",null,f((null==t?void 0:t.desc)?null==t?void 0:t.desc:"暂无描述"),1)],8,z),a("div",K,[p(w)?(e(),l("span",Y,[h(o,{onClick:e=>{return l=t,oe.value=l.name,ue.value=l.href,de.value=l.link||l.link_type,re.value=l.hot,ce.value=l.id,ne.value=!0,void(se.value="edit");var l}},null,8,["onClick"])])):k("",!0),p(w)?(e(),l("span",$,[h(b,{onClick:e=>(async e=>{if(200===(await D.deleteLink({id:e})).code)return y((()=>{ve()})),L({showClose:!0,message:"删除成功",type:"success"})})(null==t?void 0:t.id)},null,8,["onClick"])])):k("",!0)])])})),128))])],8,B);var u})),128))])]),h(he,{modelValue:p(ne),"onUpdate:modelValue":n[4]||(n[4]=e=>V(ne)?ne.value=e:null),title:"add"===p(se)?"新增":"编辑",width:"600px","destroy-on-close":"","before-close":me},{footer:A((()=>[a("span",le,[h(ke,{onClick:me},{default:A((()=>[m("取消")])),_:1}),h(ke,{type:"primary",onClick:fe},{default:A((()=>[m("确定")])),_:1})])])),default:A((()=>[a("div",null,[h(E,{ref_key:"ruleFormRef",ref:ie,"label-width":"110px"},{default:A((()=>[h(C,{label:"链接名称"},{default:A((()=>[h(g,{modelValue:p(oe),"onUpdate:modelValue":n[0]||(n[0]=e=>V(oe)?oe.value=e:null)},null,8,["modelValue"])])),_:1}),h(C,{label:"链接"},{default:A((()=>[h(g,{modelValue:p(ue),"onUpdate:modelValue":n[1]||(n[1]=e=>V(ue)?ue.value=e:null)},null,8,["modelValue"])])),_:1}),h(C,{label:"类别"},{default:A((()=>[h(g,{modelValue:p(de),"onUpdate:modelValue":n[2]||(n[2]=e=>V(de)?de.value=e:null)},null,8,["modelValue"])])),_:1}),ee,h(C,{label:"热门"},{default:A((()=>[h(j,{modelValue:p(re),"onUpdate:modelValue":n[3]||(n[3]=e=>V(re)?re.value=e:null)},null,8,["modelValue"])])),_:1})])),_:1},512)])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-7a59aee2"]]);export{ae as default};
