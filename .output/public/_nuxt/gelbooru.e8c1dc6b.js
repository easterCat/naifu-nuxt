import a from"./AreaTitle.fd636338.js";import{I as e,aU as l,r as s,aT as t,v as o,x as r,J as u,K as n,a2 as i,a0 as d,_ as p,Y as c,aC as v,$ as m,a4 as g,u as f,L as _,ap as b,b9 as h,aX as y,aY as w,aZ as j}from"./entry.867af431.js";import{u as k}from"./index.ab114e08.js";import{u as z,a as x}from"./shop.e35e1083.js";import{o as C,p as T,b as S,q as U,r as $,n as A}from"./element-plus.bb8e70a3.js";import{_ as G}from"./document-copy.a9c0c615.js";import{_ as I}from"./shopping-trolley.336a7f0f.js";/* empty css                                                                  */import"./lodash.ea4d81e6.js";const L={class:"eh-con"},O=(a=>(y("data-v-a1c832fd"),a=a(),w(),a))((()=>p("span",{class:"eh-title-side-tip"},"(分类不好用,用搜索)",-1))),V={class:"flex justify-between m-b-10"},B={class:"m-r-12"},E={class:"demo-pagination-block"},K=j(e({__name:"gelbooru",props:{searchText:{type:String,default:""}},async setup(e){let y,w;const j=e,K=l().public.GELBOORU_TOKEN,{GelbooruApi:N}=k(),{copy:Y}=z(),{addShop:q}=x(),F=s([]),J=s([]),R=s([]),W=s(1100),X=s(1),Z=s(100),D=s(0),H=([y,w]=t((()=>N.getList())),y=await y,w(),y);F.value=H.data,o((()=>j.searchText),(a=>{aa(a)})),o(W,(async a=>{var e;if(a){const l=await N.getTagsById({token:K,page:1,limit:100,category_id:a});J.value=l.data,D.value=null==(e=null==l?void 0:l.data)?void 0:e.length,Q()}}));const M=a=>{Z.value=a,X.value=1,Q()},P=a=>{X.value=a,Q()},Q=()=>{R.value=J.value.slice((X.value-1)*Z.value,X.value*Z.value)},aa=h((async a=>{W.value=null;const e=await N.searchTags({token:"b8d9e7d1fa1dcc3e5116760c093be229",keyword:a,page:2,limit:100});J.value=e.data,100==e.data.length?D.value=e.data.length+1:D.value=e.data.length,Q()}),1500);return r((()=>{Q()})),(e,l)=>{const s=a,t=C,o=T,r=I,h=S,y=G,w=U,j=$,k=A;return u(),n("div",L,[i(s,{title:"Gelbooru标签列表"},{titleSide:d((()=>[O])),_:1}),p("div",V,[i(o,{modelValue:W.value,"onUpdate:modelValue":l[0]||(l[0]=a=>W.value=a),placeholder:"类别",size:"large"},{default:d((()=>[(u(!0),n(c,null,v(F.value,(a=>(u(),m(t,{key:a.value,label:`${null==a?void 0:a.name}-${null==a?void 0:a.level}`,value:null==a?void 0:a.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),i(j,{class:"m-b-10",data:R.value,border:"",stripe:"",size:"large",style:{width:"100%"}},{default:d((()=>[i(w,{prop:"name",label:"原始标签",width:"320"},{default:d((a=>{var l;return[p("span",B,g((null==(l=a.row)?void 0:l.name)||""),1),i(h,{size:"small",circle:"",onClick:e=>{var l;return f(q)((null==(l=a.row)?void 0:l.name)||"")}},{default:d((()=>[_(e.$slots,"icon",{},(()=>[i(r)]),!0)])),_:2},1032,["onClick"]),i(h,{size:"small",circle:"",onClick:e=>{var l;return f(Y)((null==(l=a.row)?void 0:l.name)||"")}},{default:d((()=>[_(e.$slots,"icon",{},(()=>[i(y)]),!0)])),_:2},1032,["onClick"])]})),_:3}),i(w,{prop:"t_name",label:"名称",width:"250"}),i(w,{prop:"t_name",label:"NSFW",width:"100"},{default:d((a=>[b(g(a.row.is_nsfw?"是":"否"),1)])),_:1}),i(w,{prop:"desc",label:"描述"}),i(w,{prop:"remarks",label:"详细"})])),_:3},8,["data"]),p("div",E,[i(k,{"current-page":X.value,"onUpdate:current-page":l[1]||(l[1]=a=>X.value=a),"page-size":Z.value,"onUpdate:page-size":l[2]||(l[2]=a=>Z.value=a),"page-sizes":[10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:D.value,onSizeChange:M,onCurrentChange:P},null,8,["current-page","page-size","total"])])])}}}),[["__scopeId","data-v-a1c832fd"]]);export{K as default};
