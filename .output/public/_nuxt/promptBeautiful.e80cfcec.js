import e from"./AreaTitle.dc73a93c.js";import{u as l}from"./pinia.17670579.js";import{u as a,a as t}from"./shop.d3010ead.js";import{_ as s}from"./check.a62908c8.js";import{_ as n}from"./document-copy.d0e58c3c.js";import{_ as o}from"./delete.c5b0c1fb.js";import{_ as r}from"./opportunity.67839f21.js";import{e as u,a as c,f as i,G as m,H as p,Z as v,J as b,L as d,u as g,$ as f,a0 as y,a4 as h,i as k,W as C,N as _,a1 as j,I as w,_ as x,a5 as S,a6 as E}from"./element-plus.fe53e503.js";import{d as J}from"./dayjs.3bf4ac2a.js";import{_ as N}from"./entry.d71b1392.js";/* empty css                                                                  */import"./lodash.cb875ed5.js";import"./store.e5acb8cd.js";import"./vue3-clipboard-es.62b9b053.js";const V=e=>(S("data-v-715416f0"),e=e(),E(),e),$={class:"tranfer-con"},M={key:0,class:"tags-con"},O=["onClose"],Y={key:1,class:"tags-con"},z=[V((()=>v("p",{class:"no-data"},"暂无列表",-1)))],H={class:"title-side"},I={key:2,class:"history-con"},R={style:{"font-weight":"bold","margin-bottom":"4px"}},A={class:"history-button"},D=["onClick"],P=["onClick"],T=["onClick"],U={key:3,class:"tags-con"},q=[V((()=>v("p",{class:"no-data"},"暂无记录",-1)))],B=N(u({__name:"promptBeautiful",setup(u){const S="prompt_history",{$store:E}=l(),N=c(""),V=c(""),B=c([]),G=c([]),L=c(0),{copy:W}=a(),{shop:Z,setShop:F}=t();i((()=>{ie()}));const K=()=>{V.value=N.value.replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},Q=()=>{V.value=N.value.replace(/\s+/g,", ").replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},X=()=>{V.value=N.value.replace(/[-_]+/g," ").replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},ee=()=>{V.value=N.value.replace(/\{/g,"(").replace(/\}/g,")").replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},le=()=>{V.value=N.value.replace(/\(/g,"{").replace(/\)/g,"}").replace(/\s*(，+|,+)\s*/g,", "),B.value=V.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},ae=()=>{N.value=Z.value,V.value=N.value.replace(/\s*(，+|,+)\s*/g,","),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},te=()=>{F(V.value)},se=()=>{me(),G.value=[]},ne=()=>{if(N.value.includes("masterpiece"))return h.ElMessage({showClose:!0,message:"请不要重复添加",type:"warning"});N.value=`masterpiece, best quality, ${N.value}`,V.value=N.value.replace(/\s*(，+|,+)\s*/g,","),B.value=V.value.split(",").filter((e=>!!e)).map((e=>e.trim())),ce(N.value)},oe=()=>{N.value="",V.value="",B.value=[]},re=()=>{N.value=B.value.join(", "),V.value=B.value.join(", ")},ue=()=>{W(V.value)},ce=e=>{var l;let a=[];if(!e)return h.ElMessage({showClose:!0,message:"请输入prompt",type:"warning"});E.get(S)&&(a=null!=(l=JSON.parse(E.get(S)))?l:[]);if(!a.find((l=>l.prompt===e))){if(a&&a.length&&a.length>100)return h.ElMessage({showClose:!0,message:"数据超过100条",type:"warning"});a.includes(e)||a.unshift({prompt:e,time:J().format("YYYY年MM月DD日 HH时mm分ss秒")}),G.value=[...a],L.value=G.value.length,E.set(S,JSON.stringify(G.value))}},ie=()=>{E.get(S)&&(G.value=JSON.parse(E.get(S)),L.value=G.value.length)},me=()=>{E.set(S,"")};return(l,a)=>{var t,u;const c=h.ElInput,i=h.ElCol,J=h.ElRow,Z=e,F=r,ce=o,ie=n,me=s;return m(),p("div",$,[v("div",{class:"button-con"},[v("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:K},"格式化"),v("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:oe},"清空"),v("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ee}," 大括号转圆括号 "),v("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:le}," 圆括号转大括号 "),v("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ne}," 起手式 "),v("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ae},"购物车导入"),v("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:te},"导出购物车"),v("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:Q}," 空格加逗号(用于danbooru) "),v("button",{class:"btn btn-accent m-b-10",onClick:X}," 去除下划线(用于danbooru) ")]),b(J,{gutter:20},{default:d((()=>[b(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:d((()=>[b(c,{modelValue:g(N),"onUpdate:modelValue":a[0]||(a[0]=e=>k(N)?N.value=e:null),type:"textarea",placeholder:"请输入promit",rows:12,clearable:"",autosize:{minRows:12},"show-word-limit":"",maxlength:"3000"},null,8,["modelValue"])])),_:1}),b(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:d((()=>[b(c,{modelValue:g(V),"onUpdate:modelValue":a[1]||(a[1]=e=>k(V)?V.value=e:null),type:"textarea",placeholder:"输出prompt",rows:12,autosize:{minRows:12},readonly:"","show-word-limit":"",maxlength:"3000",onClick:ue},null,8,["modelValue"])])),_:1})])),_:1}),b(Z,{title:"Prompt列表"}),g(B)&&(null==(t=g(B))?void 0:t.length)?(m(),p("div",M,[v("div",{class:"m-b-10"},[v("button",{class:"btn btn-md btn-accent",onClick:re}," 当前tags替换prompt ")]),(m(!0),p(f,null,y(g(B),((e,l)=>(m(),p("button",{key:l,class:"btn btn-sm btn-secondary m-r-10 m-b-10",onClose:e=>{return a=l,void B.value.splice(a,1);var a}},C(e),41,O)))),128))])):(m(),p("div",Y,z)),b(Z,{title:"Prompt记录"},{titleSide:d((()=>[v("span",H,"总数:"+C(g(L))+"条",1)])),_:1}),g(G)&&(null==(u=g(G))?void 0:u.length)?(m(),p("div",I,[v("div",{class:"button-con"},[v("button",{class:"btn btn-md btn-accent m-b-15",onClick:se},"清空历史")]),(m(!0),p(f,null,y(g(G),((e,a)=>(m(),p("div",{key:a,class:"history-item"},[v("p",R,[0===a?(m(),_(F,{key:0,style:{color:"#67c23a","font-size":"12px"}})):j("",!0),v("span",null,C(null==e?void 0:e.time),1)]),v("p",null,C(null==e?void 0:e.prompt),1),v("div",A,[v("button",{class:"btn btn-sm btn-secondary m-r-10",onClick:e=>(e=>{var l;const a=null!=(l=JSON.parse(E.get(S)))?l:[];a.splice(e,1),G.value=[...a],L.value=G.value.length,E.set(S,JSON.stringify(G.value))})(a)},[w(l.$slots,"icon",{},(()=>[b(ce,{class:"m-r-4"})]),!0),x(" 删除 ")],8,D),v("button",{class:"btn btn-sm btn-accent m-r-10",onClick:l=>g(W)(null==e?void 0:e.prompt)},[w(l.$slots,"icon",{},(()=>[b(ie,{class:"m-r-4"})]),!0),x(" 复制 ")],8,P),v("button",{class:"btn btn-sm btn-primary m-r-10",onClick:l=>{return a=null==e?void 0:e.prompt,void(N.value=a);var a}},[w(l.$slots,"icon",{},(()=>[b(me,{class:"m-r-4"})]),!0),x(" 选择 ")],8,T)])])))),128))])):(m(),p("div",U,q))])}}}),[["__scopeId","data-v-715416f0"]]);export{B as default};
