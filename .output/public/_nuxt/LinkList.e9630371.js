import{J as e,K as l,_ as a,I as t,a$ as n,r as s,aT as o,x as i,aB as u,Y as d,aC as r,V as c,Z as v,u as f,ap as m,a4 as p,X as k,a2 as h,a0 as A,C as V,U as b,aX as y,aY as g,aZ as w}from"./entry.7629be39.js";import{u as C}from"./index.3eac53c1.js";import{I as j,h as U,i as W,j as I,k as R,c as L,g as T,l as J,b as x}from"./element-plus.bf29918d.js";import{_ as F}from"./delete.28e21da9.js";import"./FixMenu.vue_vue_type_style_index_0_scoped_5afae692_lang.c67f782d.js";import"./lodash.ea4d81e6.js";const D={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},E=[a("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),a("path",{fill:"currentColor",d:"m469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1)];const M={name:"ep-edit",render:function(a,t){return e(),l("svg",D,E)}},N={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},S=[a("path",{fill:"currentColor",d:"M288 128h608L736 384l160 256H288v320h-96V64h96v64z"},null,-1)];const _={name:"ep-flag",render:function(a,t){return e(),l("svg",N,S)}},q=e=>(y("data-v-39af9f0a"),e=e(),g(),e),P={class:"link-con"},H={class:"link-left bg-base-100"},X={class:"link-right"},B=q((()=>a("div",{class:"right-linear"},null,-1))),Z={class:"part-list"},O=["data-title","data-index"],z={class:""},Q={class:"row"},G=["href"],K=["src"],Y={key:0,class:"hot-link"},$={class:"opeartion"},ee={key:0,class:"icon"},le={key:1,class:"icon"},ae=q((()=>a("div",{style:{float:"right"}},"(hot,prompt,online,other)",-1))),te={class:"dialog-footer"},ne=w(t({__name:"LinkList",props:{filter:String},emits:["editEvent","deleteEvent"],async setup(t){let y,g;n().vueApp.provide(j,{prefix:Math.floor(1e3*Math.random()),current:0});const w=s(!1),{LinkApi:D}=C(),{links:E}=([y,g]=o((()=>D.getLinks())),y=await y,g(),y),N=s([{name:"",href:""}]),S=s([]),q=s(0);N.value=E,S.value=[...new Set(E.map((e=>e.link_type)))];const ne=s(!1),se=s(!1),oe=s(""),ie=s(),ue=s(""),de=s(""),re=s(""),ce=s(!1),ve=s(""),fe=s(null),me=async()=>{const{links:e}=await D.getLinks();N.value=e},pe=()=>{se.value=!0,oe.value="add"},ke=()=>{se.value=!1,oe.value="",b((()=>{var e;null==(e=ie.value)||e.resetFields()}))},he=()=>{"add"===oe.value&&Ae(),"edit"===oe.value&&Ve()},Ae=async()=>{if(200===(await D.addLink({name:ue.value,href:de.value,type:re.value,hot:ce.value,icon:ce.icon})).code)return ke(),b((()=>{me()})),L({showClose:!0,message:"新建成功",type:"success"})},Ve=async()=>{if(200===(await D.updateLink({name:ue.value,href:de.value,type:re.value,hot:ce.value,id:fe.value,icon:ve.value})).code)return ke(),b((()=>{me()})),L({showClose:!0,message:"更新成功",type:"success"})};return i((()=>{const e=localStorage.getItem("edit");e&&(w.value=!0),e&&(ne.value=!0)})),(t,n)=>{const s=_,o=U,i=M,y=F,g=T,C=W,j=J,E=I,Ae=x,Ve=R,be=u("scroll-to");return e(),l("div",P,[a("div",H,[a("ul",null,[(e(!0),l(d,null,r(f(S),((a,t)=>c((e(),l("li",{key:t,class:v({active:f(q)===t})},[m(p(a),1)],2)),[[be,{target:`.part:nth-child(${t+1}) > h2`,container:".link-right",behavior:"smooth",cb:e=>(e=>{q.value=e})(e||0===e?e:t)}]]))),128)),f(ne)?(e(),l("button",{key:0,class:"btn-primary btn-block btn",onClick:pe},"新增链接")):k("",!0)])]),a("div",X,[B,a("div",Z,[(e(!0),l(d,null,r(f(S),((t,n)=>{return e(),l("div",{key:t,id:"media",class:"part","data-title":t,"data-index":n},[a("h2",z,[a("strong",null,p(t),1)]),a("div",Q,[(e(!0),l(d,null,r((u=t,u?[...N.value.filter((e=>e.link_type===u))]:[]),((t,n)=>{var u;return e(),l("div",{key:n,class:"item bg-base-100"},[a("a",{href:null==t?void 0:t.href,target:"_blank"},[a("h3",null,[a("img",{src:null!=(u=null==t?void 0:t.icon)?u:f("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhBAMAAADMnc9JAAAAG1BMVEX///8AAACamprq6urR0dFOTk62trYsLCx2dnZWDjm5AAAEMUlEQVR42u2cTVMTQRCGN9lJNsdMQj6OWUspj+FTj0mpeHW56DFBSj2yWhTXBKX425pcVDIN07PdLxTM+wPy1Mx2v9PTPZAkUVFRUVFPVHs4VHr08qNda3B+eTpW5x1e2f91vj3R5O0W1qHjz1o8c20JHeusc9feol8KwHf2Vn0Xj6H39g71JmDgn2SZSQIPrMUiW9ZLA7GNNdZTPanwyX2JtiMDbFh//YDu6VojAeKURexVBzYtT1uViXMm0c7AS6wer1M2sWLwGD6w4iJrAcRqX7IIIW7pW/hNjaFxs9JZODEMWCF26oFEG3xQ7oQSz6CRWmVbjQ1WIDELJ46gubFSN4xYkkXb5fbp26Nn19If0tx5yTAvZD8kYXHDic/1ZyaXjTfuF5RJfJArU2d+F4SuWOBs/tJSLHScgTPwNd+elI27DHMpFayZ71mbSR0frlDtOzs8Uj6Xe8d8LpQehfdWOQu+tkjFMWTEWFckObqMcohfQrouHAvGJ++I+PiYEdZDiXQccu7tfGKN8Wnqfn7ILznIgE9FbG7uHzjuYJWwnAnLLdjEJec3cokLVsE58kSIJSenpxJElm9JEFOWNysR23DiGY8ocFg9KOJcgNhkVS65gJMbjq26XI59WqWselDkfCwZRm58S1vm2cG7MPArqyljmzKRerVR0Vb5TaQmIzkKy4ps358Z826aAY2AHe/TMRO6PzarOE7YpCX3NC1n7dgPIdY9l5jJtcnmfp7l7AMsgohp6RN5Tckusik8LvVz0RGdWe9Yb8YebPWTYO2ffHkT0EurMH8IbFBO9Iju5v1QDzgVbVoHtick5qzM5BcZXxN6RSyxrQU0CtPAkLa2xICe0cVRjZu01H1O4p2KMk87vFucqktcor8iGTZ9rSWW4iNkfi9UORfJyaSW3VCGGjaSq/IV1U7iDJ0ZZC6qhU3dog9iylEXCTg11NyGfCY0Rm+qWipSRXFHD2jgdX9L7xkpoRr4okEEzkiTmENTkQrVmSoRvkQDNVTiythTBbrSsatLbKDjxmEAgwRN7CsTp8huEUEcKRNz4NlPELUDZ7NW7WgTC3Sobl45unBiW5to0cQUWacSxIUy0TwAorbJNR8AcfboiPUnQIyKioqKUql2Tq4uLj49xwEPC8cfCWnqNfqoqqNPR4PsrKw1B00c6LJDPXpy2FiFrKy0+wCcP1BQuj4qd6zdbfkJeFOVm1aFBbeQ3dOVAfozqn7IGnrwSI3l2kCLUze6Aj1dTdDPAEii3rGcUq85wAZwH0T7iHY1hUfOPWRHadFvAZZwl5vDnbwGf9LRQj8CpixAs7IqwaFKhI5qUd6AP+pIwcWju9JRHs614M8B7mHi2UDPdDbcXH2JN6c6ak9k/9UBdk9X+voX+BPUmPuGBibJ/vofICn9o1fK7vb2kqioqKioJ6nfJt2wB3VsdPcAAAAASUVORK5CYII=")},null,8,K),a("span",null,p(t.name),1),(null==t?void 0:t.hot)?(e(),l("i",Y,[h(o,{color:"red"},{default:A((()=>[h(s)])),_:1})])):k("",!0)]),a("p",null,p((null==t?void 0:t.desc)?null==t?void 0:t.desc:"暂无描述"),1)],8,G),a("div",$,[f(w)?(e(),l("span",ee,[h(i,{onClick:e=>{return l=t,ue.value=l.name,de.value=l.href,re.value=l.link||l.link_type,ce.value=l.hot,ve.value=l.icon,fe.value=l.id,se.value=!0,void(oe.value="edit");var l}},null,8,["onClick"])])):k("",!0),f(w)?(e(),l("span",le,[h(y,{onClick:e=>(async e=>{if(200===(await D.deleteLink({id:e})).code)return b((()=>{me()})),L({showClose:!0,message:"删除成功",type:"success"})})(null==t?void 0:t.id)},null,8,["onClick"])])):k("",!0)])])})),128))])],8,O);var u})),128))])]),h(Ve,{modelValue:f(se),"onUpdate:modelValue":n[5]||(n[5]=e=>V(se)?se.value=e:null),title:"add"===f(oe)?"新增":"编辑",width:"600px","destroy-on-close":"","before-close":ke},{footer:A((()=>[a("span",te,[h(Ae,{onClick:ke},{default:A((()=>[m("取消")])),_:1}),h(Ae,{type:"primary",onClick:he},{default:A((()=>[m("确定")])),_:1})])])),default:A((()=>[a("div",null,[h(E,{ref_key:"ruleFormRef",ref:ie,"label-width":"110px"},{default:A((()=>[h(C,{label:"链接名称"},{default:A((()=>[h(g,{modelValue:f(ue),"onUpdate:modelValue":n[0]||(n[0]=e=>V(ue)?ue.value=e:null)},null,8,["modelValue"])])),_:1}),h(C,{label:"链接"},{default:A((()=>[h(g,{modelValue:f(de),"onUpdate:modelValue":n[1]||(n[1]=e=>V(de)?de.value=e:null)},null,8,["modelValue"])])),_:1}),h(C,{label:"Icon"},{default:A((()=>[h(g,{modelValue:f(ve),"onUpdate:modelValue":n[2]||(n[2]=e=>V(ve)?ve.value=e:null)},null,8,["modelValue"])])),_:1}),h(C,{label:"类别"},{default:A((()=>[h(g,{modelValue:f(re),"onUpdate:modelValue":n[3]||(n[3]=e=>V(re)?re.value=e:null)},null,8,["modelValue"])])),_:1}),ae,h(C,{label:"热门"},{default:A((()=>[h(j,{modelValue:f(ce),"onUpdate:modelValue":n[4]||(n[4]=e=>V(ce)?ce.value=e:null)},null,8,["modelValue"])])),_:1})])),_:1},512)])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-39af9f0a"]]);export{ne as default};
