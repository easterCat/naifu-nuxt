import{_ as e}from"./AppAnimate.vue_vue_type_script_setup_true_lang.eec04da4.js";import{u as l}from"./index.3eac53c1.js";import{J as a,K as s,_ as t,I as i,aT as o,aU as n,a8 as c,aV as u,aS as d,r as v,v as r,x as m,a2 as p,u as k,a0 as h,Z as f,Y as C,aC as y,X as g,C as _,aW as b,aX as x,aY as z,ap as j,a4 as w,L as S,V,aE as L,aZ as T}from"./entry.7629be39.js";import{u as E,a as B}from"./shop.55f105a8.js";import{_ as O}from"./document-copy.b15446c4.js";import{E as A,a as N,b as U}from"./element-plus.bf29918d.js";import{_ as I,a as M,b as $,c as G}from"./plus.fce3a396.js";import{_ as H}from"./delete.28e21da9.js";import{_ as J}from"./copy-document.332402ee.js";import{_ as K}from"./shopping-trolley.c981d733.js";import{d as X}from"./vuedraggable.12f20fb9.js";import"./lodash.ea4d81e6.js";import"./sortablejs.8210fcbe.js";const Y={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Z=[t("path",{fill:"currentColor",d:"m199.04 672.64l193.984 112l224-387.968l-193.92-112l-224 388.032zm-23.872 60.16l32.896 148.288l144.896-45.696L175.168 732.8zM455.04 229.248l193.92 112l56.704-98.112l-193.984-112l-56.64 98.112zM104.32 708.8l384-665.024l304.768 175.936L409.152 884.8h.064l-248.448 78.336L104.32 708.8zm384 254.272v-64h448v64h-448z"},null,-1)];const D={name:"ep-edit-pen",render:function(e,l){return a(),s("svg",Y,Z)}},R={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},W=[t("path",{fill:"currentColor",d:"M512 128L128 447.936V896h255.936V640H640v256h255.936V447.936z"},null,-1)];const q={name:"ep-home-filled",render:function(e,l){return a(),s("svg",R,W)}},F={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},P=[t("path",{fill:"currentColor",d:"M685.248 104.704a64 64 0 0 1 0 90.496L368.448 512l316.8 316.8a64 64 0 0 1-90.496 90.496L232.704 557.248a64 64 0 0 1 0-90.496l362.048-362.048a64 64 0 0 1 90.496 0z"},null,-1)];const Q={name:"ep-arrow-left-bold",render:function(e,l){return a(),s("svg",F,P)}},ee=e=>(x("data-v-e5fb4407"),e=e(),z(),e),le={class:"header"},ae={class:"back"},se={class:"header-center"},te={class:"header-right"},ie={class:"body"},oe={class:"left"},ne={class:"left-layer1"},ce=ee((()=>t("div",{class:"layer-top"},"数据来源",-1))),ue={class:"layer-bottom"},de=ee((()=>t("div",{class:"layer-top"},"标签类别",-1))),ve={key:0,class:"type-list"},re=["onClick"],me={key:1,class:"type-list"},pe=["onClick"],ke={class:"center"},he={class:"shop-card-con"},fe={class:"shop-item"},Ce={class:"tran-text"},ye={class:"right"},ge={class:"tag-list"},_e={class:"text-con"},be={class:"zh"},xe={class:"text-con"},ze={class:"zh"},je={key:0,class:"import-wrapper"},we={class:"import-layer"},Se={class:"import-button"},Ve=T(i({__name:"index",props:["modelValue"],async setup(i){let x,z;const{DefaultTagsApi:T}=l(),Y=([x,z]=o((()=>T.getTags())),x=await x,z(),x),Z=JSON.parse(Y),R=n().public.GELBOORU_TOKEN,W=c({animation:400,group:"people",disabled:!1,ghostClass:"ghost"}),{GelbooruApi:F,ShopApi:P}=l(),ee=u(),Ve=d(),Le=v("1"),Te=v(""),Ee=v(!1),Be=v(1),Oe=v(0),{copy:Ae}=E(),{addShop:Ne,renameShopName:Ue,shopList:Ie,shop:Me,onlySetShop:$e,initShop:Ge,setShop:He,clearShop:Je,removeShopByName:Ke,copyShop:Xe,addOneCircle:Ye,removeOneCircle:Ze,createNewShopItem:De}=B(),Re=v(Z.class),We=v(Re.value[0].data),qe=v([]),Fe=v([]);r(Ie,(e=>{"pc-design"===ee.name&&$e(e.map((e=>e.text)).join(", "))}));const Pe=()=>{Ve.go(-1)},Qe=()=>{Ve.replace("/pc/home")},el=()=>{Ee.value=!0},ll=()=>{He(Te.value),Ee.value=!1},al=async()=>{var e;const l=await P.translate({text:Me.value,type:1});(null==(e=null==l?void 0:l.data)?void 0:e.translateText).split("，").forEach(((e,l)=>{Ie.value[l].translateText=e}))},sl=e=>{Be.value=e,Oe.value=0,2===e&&(async()=>{const e=await F.getList();qe.value=e.data})()},tl=async(e,l)=>{if(1===Be.value)We.value=Re.value[e].data,Oe.value=e;else if(2===Be.value){const a=await F.getTagsById({token:R,page:1,limit:100,category_id:l});Oe.value=e,Fe.value=a.data}};return m((()=>{Ge()})),(l,i)=>{const o=Q,n=q,c=K,u=I,d=J,v=M,r=H,m=A,x=N,z=$,T=D,E=G,B=U,Y=O,Z=e;return a(),s("div",{class:f(["design-page page",{white:"2"===Le.value}])},[t("div",le,[t("div",ae,[p(o,{onClick:Pe}),p(n,{onClick:Qe})]),t("div",se,[p(c,{onClick:el}),p(u,{onClick:k(De)},null,8,["onClick"]),p(d,{onClick:k(Xe)},null,8,["onClick"]),p(v,{onClick:al}),p(r,{onClick:k(Je)},null,8,["onClick"])]),t("div",te,[p(x,{modelValue:Le.value,"onUpdate:modelValue":i[0]||(i[0]=e=>Le.value=e),class:"ml-4"},{default:h((()=>[p(m,{label:"1",size:"large"},{default:h((()=>[j("深色")])),_:1}),p(m,{label:"2",size:"large"},{default:h((()=>[j("浅色")])),_:1})])),_:1},8,["modelValue"])])]),t("div",ie,[t("div",oe,[t("div",ne,[ce,t("div",ue,[t("div",{class:f(["left-menu",{"item-active":1===Be.value}]),onClick:i[1]||(i[1]=e=>sl(1))}," 常规标签 ",2),t("div",{class:f(["left-menu",{"item-active":2===Be.value}]),onClick:i[2]||(i[2]=e=>sl(2))}," Gelbooru标签 ",2),t("div",{class:f(["left-menu",{"item-active":3===Be.value}]),onClick:i[3]||(i[3]=e=>sl(3))}," EH标签(500个) ",2),t("div",{class:f(["left-menu",{"item-active":4===Be.value}]),onClick:i[4]||(i[4]=e=>sl(4))}," EH标签(31000个) ",2)]),de,1===Be.value?(a(),s("div",ve,[(a(!0),s(C,null,y(Re.value,((e,l)=>(a(),s("div",{key:l,class:f(["type-item",{"type-item-active ":l===Oe.value}]),onClick:e=>tl(l)},w(null==e?void 0:e.name),11,re)))),128))])):g("",!0),2===Be.value?(a(),s("div",me,[(a(!0),s(C,null,y(qe.value,((e,l)=>(a(),s("div",{key:l,class:f(["type-item",{"type-item-active ":l===Oe.value}]),onClick:a=>tl(l,null==e?void 0:e.id)},w(null==e?void 0:e.name)+"("+w(null==e?void 0:e.level)+") ",11,pe)))),128))])):g("",!0)])]),t("div",ke,[t("div",he,[p(k(X),{modelValue:k(Ie),"onUpdate:modelValue":i[5]||(i[5]=e=>_(Ie)?Ie.value=e:null),"component-data":{name:"list"},"drag-options":k(W),"item-key":e=>{(e=>{b.v4()})(e)}},{item:h((({element:e})=>[t("div",fe,[t("div",null,[t("span",null,w(e.text),1),t("span",Ce,w(e.translateText),1),p(u,{class:"add",onClick:l=>k(Ye)(e.text)},null,8,["onClick"]),p(z,{class:"minus",onClick:l=>k(Ze)(e.text)},null,8,["onClick"]),p(T,{class:"remove",onClick:l=>k(Ue)(e.text)},null,8,["onClick"]),p(E,{class:"remove",onClick:l=>k(Ke)(e.text)},null,8,["onClick"])])])])),_:1},8,["modelValue","drag-options","item-key"])])]),t("div",ye,[t("div",ge,[1===Be.value?(a(!0),s(C,{key:0},y(We.value,((e,i)=>(a(),s("div",{key:i,class:"tag-item"},[t("div",_e,[t("p",be,w(null==e?void 0:e.zh)+" "+w(null==e?void 0:e.en),1)]),t("div",null,[p(B,{size:"small",circle:"",onClick:l=>k(Ne)(null==e?void 0:e.en)},{default:h((()=>[S(l.$slots,"icon",{},(()=>[p(c)]),!0)])),_:2},1032,["onClick"]),p(B,{size:"small",circle:"",onClick:l=>k(Ae)(null==e?void 0:e.en)},{default:h((()=>[S(l.$slots,"icon",{},(()=>[p(Y)]),!0)])),_:2},1032,["onClick"])])])))),128)):g("",!0),2===Be.value?(a(!0),s(C,{key:1},y(Fe.value,((e,i)=>(a(),s("div",{key:i,class:"tag-item"},[t("div",xe,[t("p",ze,w(null==e?void 0:e.t_name)+" "+w(null==e?void 0:e.name),1)]),t("div",null,[p(B,{size:"small",circle:"",onClick:l=>k(Ne)(null==e?void 0:e.en)},{default:h((()=>[S(l.$slots,"icon",{},(()=>[p(c)]),!0)])),_:2},1032,["onClick"]),p(B,{size:"small",circle:"",onClick:l=>k(Ae)(null==e?void 0:e.en)},{default:h((()=>[S(l.$slots,"icon",{},(()=>[p(Y)]),!0)])),_:2},1032,["onClick"])])])))),128)):g("",!0)])])]),p(Z,null,{default:h((()=>[Ee.value?(a(),s("div",je,[t("div",we,[V(t("textarea",{"onUpdate:modelValue":i[6]||(i[6]=e=>Te.value=e),type:"text"},null,512),[[L,Te.value]])]),t("div",Se,[t("button",{onClick:i[7]||(i[7]=()=>Ee.value=!1)},"取消"),t("button",{onClick:ll},"确定")])])):g("",!0)])),_:1})],2)}}}),[["__scopeId","data-v-e5fb4407"]]);export{Ve as default};
