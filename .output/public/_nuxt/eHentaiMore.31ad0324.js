import e from"./AreaTitle.d4475132.js";import{u as a}from"./index.251a9acf.js";import{u as l,a as t}from"./shop.59954df9.js";import{I as s,aV as n,r as o,a8 as u,v as r,J as i,K as d,a2 as c,a0 as v,_ as p,Z as m,X as b,$ as f,u as g,Y as h,aC as y,a4 as _,L as k,ap as w,b8 as j,aX as C,aY as x,aZ as z}from"./entry.f0c30f1b.js";import{l as M,o as T,p as L,q as V,b as H,r as S,n as $}from"./element-plus.51c032f9.js";import{_ as A}from"./document-copy.4e4ddecf.js";import{_ as U}from"./shopping-trolley.68786ad6.js";/* empty css                                                                  */import"./lodash.ea4d81e6.js";const E={class:"eh-con"},J=(e=>(C("data-v-22e17879"),e=e(),x(),e))((()=>p("span",{class:"eh-title-side-tip"},"(31813个标签版本,高h,慎重)",-1))),R={key:0,class:"flex justify-between m-b-10"},D={class:"control-blur-btns"},I={class:"m-r-12"},N=["innerHTML"],O=["innerHTML"],X={key:2,class:"demo-pagination-block"},Y=z(s({__name:"eHentaiMore",props:{searchText:{type:String,default:""}},setup(s){const C=s,{EhttApi:x}=a(),{copy:z}=l(),{addShop:Y}=t(),Z=n(),q=o(!1),K=o(!1),W=o(1),B=o(20),F=o(0),G=o("hidden"),P=o(""),Q=o([]);let ee=u([]),ae=u([]),le=u([]),te=u([]),se=u({data:[]});const ne=new Worker("/nuxt3-tag/worker.js");ne.onmessage=function(e){const{type:a,data:l}=e.data;"all"===a&&(ae=l,le=l,F.value=le.length,ie()),"select"===a&&(le=l,F.value=le.length,ie()),"search"===a&&(le=l,F.value=le.length,ie())},ne.onerror=function(e){console.log(["worker ERROR: Line ",e.lineno," in ",e.filename,": ",e.message].join(""))},r(q,(e=>{"pc-tags-eh"===Z.name&&e&&!K.value&&(K.value=!0,oe())})),r(C,(e=>{"pc-tags-eh"===Z.name&&de(e.searchText)})),r(P,(async e=>{"pc-tags-eh"===Z.name&&ne.postMessage({type:"select",data:ae,select:e})}));const oe=async()=>{se=await x.getNameSpaceList(),Q.value=se.data;const e=await x.getAllJsonData();ee=JSON.parse(e).data,ne.postMessage({type:"all",data:ee})},ue=e=>{B.value=e,W.value=1,ie()},re=e=>{W.value=e,ie()},ie=()=>{te=le.slice((W.value-1)*B.value,W.value*B.value),console.log("tableData :>> ",te)},de=j((e=>{P.value="",ne.postMessage({type:"search",data:ae,search:e})}),1500);return(a,l)=>{const t=M,s=e,n=T,o=L,u=V,r=U,j=H,C=A,x=S,Z=$;return i(),d("div",E,[c(s,{title:"EH超多标签列表"},{titleSide:v((()=>[c(t,{modelValue:q.value,"onUpdate:modelValue":l[0]||(l[0]=e=>q.value=e),size:"large","inline-prompt":"","inactive-text":"隐藏","active-text":"开启",class:"title-side"},null,8,["modelValue"]),J])),_:1}),q.value?(i(),d("div",R,[c(o,{modelValue:P.value,"onUpdate:modelValue":l[1]||(l[1]=e=>P.value=e),class:"m-2",placeholder:"命名空间",size:"large"},{default:v((()=>[(i(!0),d(h,null,y(Q.value,(e=>{var a;return i(),f(n,{key:e.value,label:`${null==e?void 0:e.namespace} ${null==(a=null==e?void 0:e.frontMatters)?void 0:a.name} ${null==e?void 0:e.count}条`,value:e.namespace},null,8,["label","value"])})),128))])),_:1},8,["modelValue"]),p("div",D,[p("button",{class:m(["btn btn-sm m-r-10",["hidden"===G.value?"btn-accent":"btn-secondary"]]),onClick:l[2]||(l[2]=()=>G.value="hidden")}," 隐藏 ",2),p("button",{class:m(["btn btn-sm m-r-10",["flur"===G.value?"btn-accent":"btn-secondary"]]),onClick:l[3]||(l[3]=()=>G.value="flur")}," 模糊 ",2),p("button",{class:m(["btn btn-sm m-r-10",["show"===G.value?"btn-accent":"btn-secondary"]]),onClick:l[4]||(l[4]=()=>G.value="show")}," 缩小 ",2),p("button",{class:m(["btn btn-sm",["default"===G.value?"btn-accent":"btn-secondary"]]),onClick:l[5]||(l[5]=()=>G.value="default")}," 原图 ",2)])])):b("",!0),q.value?(i(),f(x,{key:1,class:"m-b-10",data:g(te),border:"",stripe:"",size:"large",style:{width:"100%"}},{default:v((()=>[c(u,{prop:"namespace",label:"命名空间",width:"130"}),c(u,{prop:"key",label:"原始标签",width:"270"},{default:v((e=>{var l;return[p("span",I,_((null==(l=e.row)?void 0:l.key)||""),1),c(j,{size:"small",circle:"",onClick:a=>{var l;return g(Y)((null==(l=e.row)?void 0:l.key)||"")}},{default:v((()=>[k(a.$slots,"icon",{},(()=>[c(r)]),!0)])),_:2},1032,["onClick"]),c(j,{size:"small",circle:"",onClick:a=>{var l;return g(z)((null==(l=e.row)?void 0:l.key)||"")}},{default:v((()=>[k(a.$slots,"icon",{},(()=>[c(C)]),!0)])),_:2},1032,["onClick"])]})),_:3}),c(u,{prop:"value",label:"名称",width:"170"},{default:v((e=>{var a,l,t;return[w(_((null==(t=null==(l=null==(a=e.row)?void 0:a.value)?void 0:l.name)?void 0:t.text)||""),1)]})),_:1}),c(u,{prop:"value",label:"描述"},{default:v((e=>{var a,l,t;return[p("div",{class:m(["table-intro",{"show-img":"show"===G.value,"hidden-img":"hidden"===G.value,"flur-img":"flur"===G.value,"default-img":"default"===G.value}]),innerHTML:(null==(t=null==(l=null==(a=e.row)?void 0:a.value)?void 0:l.intro)?void 0:t.html)||""},null,10,N)]})),_:1}),c(u,{prop:"value",label:"数据库页面",width:"180"},{default:v((e=>{var a,l,t;return[p("div",{innerHTML:(null==(t=null==(l=null==(a=e.row)?void 0:a.value)?void 0:l.links)?void 0:t.html.replace(/(<a)/g,"<a target='_blank'"))||""},null,8,O)]})),_:1})])),_:3},8,["data"])):b("",!0),q.value?(i(),d("div",X,[c(Z,{"current-page":W.value,"onUpdate:current-page":l[6]||(l[6]=e=>W.value=e),"page-size":B.value,"onUpdate:page-size":l[7]||(l[7]=e=>B.value=e),"page-sizes":[20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:F.value,onSizeChange:ue,onCurrentChange:re},null,8,["current-page","page-size","total"])])):b("",!0)])}}}),[["__scopeId","data-v-22e17879"]]);export{Y as default};
