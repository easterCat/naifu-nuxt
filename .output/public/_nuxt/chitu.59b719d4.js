import e from"./AppHeader.72be329c.js";import t from"./client-only.36cb5329.js";import l from"./AppBanner.624179b3.js";import a from"./AreaTitle.d2cca97e.js";import n from"./AnimationButton.accfedd7.js";import{_ as o}from"./AppHeader.vue_vue_type_style_index_0_scoped_2a3485e7_lang.1dee27ff.js";import s from"./TemplateDetail.606dfedb.js";import{u as i,a as u}from"./shop.d3010ead.js";import{u as c}from"./index.131f7cc9.js";import{J as d}from"./pinia.17670579.js";import{_ as r}from"./document-copy.d0e58c3c.js";import{_ as p}from"./shopping-trolley.ded7af5a.js";import{e as m,r as v,a as _,f as b,b as g,G as y,H as f,J as j,L as h,Z as k,a2 as x,N as C,u as N,a1 as A,$ as w,a0 as E,aa as I,Y as S,W as z,a4 as U}from"./element-plus.fe53e503.js";import{l as H}from"./lodash.cb875ed5.js";import{_ as T}from"./entry.0f1f4d34.js";import"./ShopLayer.4b6bca95.js";import"./AppAnimate.vue_vue_type_script_setup_true_lang.c1c03cdc.js";import"./plus.c0ce5731.js";import"./close-bold.ada4cf83.js";import"./vuedraggable.03145536.js";import"./dayjs.3bf4ac2a.js";import"./sortablejs.91a11583.js";import"./uuid.d56aad75.js";import"./vue3-clipboard-es.62b9b053.js";import"./store.e5acb8cd.js";import"./AppHeader.vue_vue_type_style_index_0_scoped_e57bc06e_lang.5cf572d0.js";/* empty css                                                              *//* empty css                                                                  *//* empty css                                                                       *//* empty css                                                                  *//* empty css                                                                  */import"./Icon.b50eae24.js";import"./LinkList.vue_vue_type_style_index_0_scoped_ca6c464e_lang.c2f4371d.js";/* empty css                                                                */import"./04.e372062b.js";import"./sYw7uX71Xe.38399cea.js";import"./copy-document.12769081.js";const V={class:"chitu-tags-page page"},L={class:"content"},X={class:"type-list"},B={key:0,class:"tag-list"},J=["data-index"],Y={key:0,class:"image-con"},D={class:"text-con"},F={key:0,class:"en"},$={key:1,class:"en"},q={class:"button-con"},G=["onClick"],M=["onClick"],O={key:1,class:"tag-list"},R=["data-index"],W={key:0,class:"image-con"},Z={class:"text-con"},K={key:0,class:"en"},P={key:1,class:"en"},Q={class:"button-con"},ee=["onClick"],te=["onClick"],le={key:2,class:"tag-list"},ae=["data-index"],ne={key:0,class:"image-con"},oe={class:"text-con"},se={key:0,class:"en"},ie={key:1,class:"en"},ue={class:"button-con"},ce=["onClick"],de=["onClick"],re=T(m({__name:"chitu",setup(m){const{copy:T}=i(),{addShop:re}=u(),{TemplateApi:pe}=c(),me=async e=>{const t=(await d(e,"$XHYNvCeXRl")).data;return JSON.parse(t._rawValue)},ve=v([{name:"参考图",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_cankaotu.json")},{name:"人物",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huageren.json")},{name:"物体",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huagewuti.json")},{name:"构图",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_goutu.json")},{name:"画风",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huafeng.json")},{name:"正面词组",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_zhengmiantag.json")},{name:"负面词组",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_fumiantag.json")}]),_e=_([]),be=_(0),ge=_(!0),ye=_(""),fe=_({}),je=_(!1),he=_(1),ke=_(50),xe=_();let Ce=[],Ne=0;const Ae=async()=>{const e=await pe.getTemplatesChitu({pageIndex:he.value,pageSize:ke.value});_e.value=[..._e.value,...(null==e?void 0:e.templates)?e.templates:[]]},we=e=>{be.value?(fe.value={author:e.author,n_prompt:e.n_prompt,preview:e.preview,model:e.model,prompt:e.prompt,prompt_zh:e.prompt_zh,name:e.name,desc:e.desc},je.value=!0):(fe.value={name:e.name,author:e.author,preview:e.imgbb_url?e.imgbb_url:e.preview,prompt:e.prompt,prompt_zh:e.prompt_zh,n_prompt:e.n_prompt,model:e.model,desc:e.desc,like:e.like},je.value=!0)},Ee=e=>{ye.value=e},Ie=()=>{_e.value=_e.value.concat(Ce.slice(50*Ne,50*(Ne+1)))},Se=H.throttle((()=>{const e=xe.value.scrollTop;xe.value.scrollHeight-(e+(document.documentElement.clientHeight||document.body.clientHeight))<=100&&(console.log("触底"),be.value?(Ne++,Ie()):(he.value++,Ae()))}),1500);return b((async()=>{Ae(),xe.value=document.querySelector(".chitu-tags-page"),xe.value.addEventListener("scroll",Se)})),g((()=>{xe.value.removeEventListener("scroll",Se)})),(i,u)=>{const c=e,d=t,m=l,v=a,_=n,b=U.ElSwitch,g=o,H=U.ElTooltip,pe=p,me=r,ye=s,ke=I("animate-css");return y(),f("div",V,[j(d,null,{default:h((()=>[j(c)])),_:1}),k("div",L,[j(m,{placeholder:"搜索标签",onSearchChange:Ee}),x(j(v,{title:"标签类别"},null,512),[[ke,{direction:"modifySlideInUp"}]]),k("div",X,[j(d,null,{default:h((()=>[(y(!0),f(w,null,E(N(ve),((e,t)=>x((y(),C(_,{key:t,index:t+"","button-style":1,"button-size":"larger",class:S([t===be.value?"btn-accent":"btn-primary-30"]),"button-text":null==e?void 0:e.name,onSubmit:e=>(async e=>{Ne=0,he.value=1,(be.value||0===be.value)&&e?(be.value=e,_e.value=[],Ce=await ve[e].file,Ie()):(be.value=0,_e.value=[],Ae())})(t)},null,8,["index","class","button-text","onSubmit"])),[[ke,{direction:"modifySlideInUp",delay:30*t}]]))),128))])),_:1})]),x((y(),C(v,{title:"标签列表"},{titleSide:h((()=>[j(b,{modelValue:ge.value,"onUpdate:modelValue":u[0]||(u[0]=e=>ge.value=e),size:"large","inline-prompt":"","inactive-text":"隐藏Image","active-text":"开启Image",class:"title-side"},null,8,["modelValue"])])),_:1})),[[ke,{direction:"modifySlideInUp"}]]),N(Ne)?(y(),f("div",B,[j(d,null,{default:h((()=>[(y(!0),f(w,null,E(_e.value,((e,t)=>{var l;return x((y(),f("div",{key:t,class:"tag-item-img ll-media bg-base-100","data-index":t},[ge.value&&5!==be.value&&6!==be.value?(y(),f("div",Y,[(null==e?void 0:e.min_imgbb_url)?(y(),C(g,{key:0,src:null!=(l=null==e?void 0:e.min_imgbb_url)?l:"",placeholder:[100,50,10],loading:"lazy",onClick:t=>we(e)},null,8,["src","onClick"])):A("",!0)])):A("",!0),k("div",D,[j(H,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:h((()=>[(null==e?void 0:e.title)?(y(),f("p",F,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(y(),f("p",$,z((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),k("div",q,[k("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:t=>N(re)(null==e?void 0:e.promptEN)},[j(pe)],8,G),k("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:t=>N(T)(null==e?void 0:e.promptEN)},[j(me)],8,M)])],8,J)),[[ke,{direction:"modifySlideInUp",delay:40*t}]])})),128))])),_:1})])):A("",!0),be.value?(y(),f("div",O,[j(d,null,{default:h((()=>[(y(!0),f(w,null,E(_e.value,((e,t)=>x((y(),f("div",{key:t,class:"tag-item-img ll-media bg-base-100","data-index":t},[ge.value&&5!==be.value&&6!==be.value?(y(),f("div",W,[(null==e?void 0:e.fileUrl)?(y(),C(g,{key:0,src:null==e?void 0:e.fileUrl,placeholder:[100,50,10],loading:"lazy",onClick:t=>we(e)},null,8,["src","onClick"])):A("",!0)])):A("",!0),k("div",Z,[j(H,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:h((()=>[(null==e?void 0:e.title)?(y(),f("p",K,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(y(),f("p",P,z((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),k("div",Q,[k("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:t=>N(re)(null==e?void 0:e.promptEN)},[j(pe)],8,ee),k("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:t=>N(T)(null==e?void 0:e.promptEN)},[j(me)],8,te)])],8,R)),[[ke,{direction:"modifySlideInUp",delay:40*t}]]))),128))])),_:1})])):(y(),f("div",le,[(y(!0),f(w,null,E(_e.value,((e,t)=>{var l;return y(),f("div",{key:t,class:"tag-item-img ll-media bg-base-100","data-index":t},[ge.value&&5!==be.value&&6!==be.value?(y(),f("div",ne,[(null==e?void 0:e.min_imgbb_url)?(y(),C(g,{key:0,src:null!=(l=null==e?void 0:e.min_imgbb_url)?l:"",placeholder:[100,50,10],loading:"lazy",onClick:t=>we(e)},null,8,["src","onClick"])):A("",!0)])):A("",!0),k("div",oe,[j(H,{class:"box-item",effect:"dark",content:null==e?void 0:e.prompt,placement:"top"},{default:h((()=>[(null==e?void 0:e.title)?(y(),f("p",se,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(y(),f("p",ie,z((null==e?void 0:e.prompt.length)>24?(null==e?void 0:e.prompt.slice(0,24))+"...":null==e?void 0:e.prompt),1))])),_:2},1032,["content"])]),k("div",ue,[k("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:t=>N(re)(null==e?void 0:e.prompt)},[j(pe)],8,ce),k("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:t=>N(T)(null==e?void 0:e.prompt)},[j(me)],8,de)])],8,ae)})),128))]))]),j(ye,{modelValue:je.value,"onUpdate:modelValue":u[1]||(u[1]=e=>je.value=e),"current-template":fe.value},null,8,["modelValue","current-template"])])}}}),[["__scopeId","data-v-9c346e73"]]);export{re as default};
