import{_ as e}from"./AppAnimate.vue_vue_type_script_setup_true_lang.cfb15b5e.js";import{J as l,K as a,_ as t,I as n,a$ as s,r as u,aT as i,x as o,aB as d,a2 as r,a0 as c,Y as v,aC as p,V as m,Z as f,u as k,ap as h,a4 as A,X as b,C as V,U as y,aX as g,aY as w,aZ as C}from"./entry.867af431.js";import{u as _}from"./index.ab114e08.js";import{I as j,h as U,i as W,j as I,k as R,c as L,g as T,l as J,b as x}from"./element-plus.bb8e70a3.js";import{_ as F}from"./delete.b5254baa.js";import"./FixMenu.vue_vue_type_style_index_0_scoped_5afae692_lang.4fd931d8.js";import"./lodash.ea4d81e6.js";const D={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},E=[t("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),t("path",{fill:"currentColor",d:"m469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1)];const M={name:"ep-edit",render:function(e,t){return l(),a("svg",D,E)}},N={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},S=[t("path",{fill:"currentColor",d:"M288 128h608L736 384l160 256H288v320h-96V64h96v64z"},null,-1)];const q={name:"ep-flag",render:function(e,t){return l(),a("svg",N,S)}},P=e=>(g("data-v-1585df29"),e=e(),w(),e),H={class:"link-con"},X={class:"link-left bg-base-100"},B={class:"link-right"},Z=P((()=>t("div",{class:"right-linear"},null,-1))),O={class:"part-list"},z=["data-title","data-index"],Q={class:""},G={class:"row"},K=["href"],Y=["src"],$={key:0,class:"hot-link"},ee={class:"opeartion"},le={key:0,class:"icon"},ae={key:1,class:"icon"},te=P((()=>t("div",{style:{float:"right"}},"(hot,prompt,online,other)",-1))),ne={class:"dialog-footer"},se=C(n({__name:"LinkList",props:{filter:String},emits:["editEvent","deleteEvent"],async setup(n){let g,w;s().vueApp.provide(j,{prefix:Math.floor(1e3*Math.random()),current:0});const C=u(!1),{LinkApi:D}=_(),{links:E}=([g,w]=i((()=>D.getLinks())),g=await g,w(),g),N=u([{name:"",href:""}]),S=u([]),P=u(0);N.value=E,S.value=[...new Set(E.map((e=>e.link_type)))];const se=u(!1),ue=u(!1),ie=u(""),oe=u(),de=u(""),re=u(""),ce=u(""),ve=u(!1),pe=u(""),me=u(null),fe=async()=>{const{links:e}=await D.getLinks();N.value=e},ke=()=>{ue.value=!0,ie.value="add"},he=()=>{ue.value=!1,ie.value="",y((()=>{var e;null==(e=oe.value)||e.resetFields()}))},Ae=()=>{"add"===ie.value&&be(),"edit"===ie.value&&Ve()},be=async()=>{if(200===(await D.addLink({name:de.value,href:re.value,type:ce.value,hot:ve.value,icon:ve.icon})).code)return he(),y((()=>{fe()})),L({showClose:!0,message:"新建成功",type:"success"})},Ve=async()=>{if(200===(await D.updateLink({name:de.value,href:re.value,type:ce.value,hot:ve.value,id:me.value,icon:pe.value})).code)return he(),y((()=>{fe()})),L({showClose:!0,message:"更新成功",type:"success"})};return o((()=>{const e=localStorage.getItem("edit");e&&(C.value=!0),e&&(se.value=!0)})),(n,s)=>{const u=e,i=q,o=U,g=M,w=F,_=T,j=W,E=J,be=I,Ve=x,ye=R,ge=d("scroll-to");return l(),a("div",H,[r(u,null,{default:c((()=>[t("div",X,[t("ul",null,[(l(!0),a(v,null,p(k(S),((e,t)=>m((l(),a("li",{key:t,class:f({active:k(P)===t})},[h(A(e),1)],2)),[[ge,{target:`.part:nth-child(${t+1}) > h2`,container:".link-right",behavior:"smooth",cb:e=>(e=>{P.value=e})(e||0===e?e:t)}]]))),128)),k(se)?(l(),a("button",{key:0,class:"btn-primary btn-block btn",onClick:ke}," 新增链接 ")):b("",!0)])])])),_:1}),r(u,null,{default:c((()=>[t("div",B,[Z,t("div",O,[(l(!0),a(v,null,p(k(S),((e,n)=>{return l(),a("div",{key:e,id:"media",class:"part","data-title":e,"data-index":n},[t("h2",Q,[t("strong",null,A(e),1)]),t("div",G,[(l(!0),a(v,null,p((s=e,s?[...N.value.filter((e=>e.link_type===s))]:[]),((e,n)=>{var s;return l(),a("div",{key:n,class:"item bg-base-100"},[t("a",{href:null==e?void 0:e.href,target:"_blank"},[t("h3",null,[t("img",{src:null!=(s=null==e?void 0:e.icon)?s:k("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhBAMAAADMnc9JAAAAG1BMVEX///8AAACamprq6urR0dFOTk62trYsLCx2dnZWDjm5AAAEMUlEQVR42u2cTVMTQRCGN9lJNsdMQj6OWUspj+FTj0mpeHW56DFBSj2yWhTXBKX425pcVDIN07PdLxTM+wPy1Mx2v9PTPZAkUVFRUVFPVHs4VHr08qNda3B+eTpW5x1e2f91vj3R5O0W1qHjz1o8c20JHeusc9feol8KwHf2Vn0Xj6H39g71JmDgn2SZSQIPrMUiW9ZLA7GNNdZTPanwyX2JtiMDbFh//YDu6VojAeKURexVBzYtT1uViXMm0c7AS6wer1M2sWLwGD6w4iJrAcRqX7IIIW7pW/hNjaFxs9JZODEMWCF26oFEG3xQ7oQSz6CRWmVbjQ1WIDELJ46gubFSN4xYkkXb5fbp26Nn19If0tx5yTAvZD8kYXHDic/1ZyaXjTfuF5RJfJArU2d+F4SuWOBs/tJSLHScgTPwNd+elI27DHMpFayZ71mbSR0frlDtOzs8Uj6Xe8d8LpQehfdWOQu+tkjFMWTEWFckObqMcohfQrouHAvGJ++I+PiYEdZDiXQccu7tfGKN8Wnqfn7ILznIgE9FbG7uHzjuYJWwnAnLLdjEJec3cokLVsE58kSIJSenpxJElm9JEFOWNysR23DiGY8ocFg9KOJcgNhkVS65gJMbjq26XI59WqWselDkfCwZRm58S1vm2cG7MPArqyljmzKRerVR0Vb5TaQmIzkKy4ps358Z826aAY2AHe/TMRO6PzarOE7YpCX3NC1n7dgPIdY9l5jJtcnmfp7l7AMsgohp6RN5Tckusik8LvVz0RGdWe9Yb8YebPWTYO2ffHkT0EurMH8IbFBO9Iju5v1QDzgVbVoHtick5qzM5BcZXxN6RSyxrQU0CtPAkLa2xICe0cVRjZu01H1O4p2KMk87vFucqktcor8iGTZ9rSWW4iNkfi9UORfJyaSW3VCGGjaSq/IV1U7iDJ0ZZC6qhU3dog9iylEXCTg11NyGfCY0Rm+qWipSRXFHD2jgdX9L7xkpoRr4okEEzkiTmENTkQrVmSoRvkQDNVTiythTBbrSsatLbKDjxmEAgwRN7CsTp8huEUEcKRNz4NlPELUDZ7NW7WgTC3Sobl45unBiW5to0cQUWacSxIUy0TwAorbJNR8AcfboiPUnQIyKioqKUql2Tq4uLj49xwEPC8cfCWnqNfqoqqNPR4PsrKw1B00c6LJDPXpy2FiFrKy0+wCcP1BQuj4qd6zdbfkJeFOVm1aFBbeQ3dOVAfozqn7IGnrwSI3l2kCLUze6Aj1dTdDPAEii3rGcUq85wAZwH0T7iHY1hUfOPWRHadFvAZZwl5vDnbwGf9LRQj8CpixAs7IqwaFKhI5qUd6AP+pIwcWju9JRHs614M8B7mHi2UDPdDbcXH2JN6c6ak9k/9UBdk9X+voX+BPUmPuGBibJ/vofICn9o1fK7vb2kqioqKioJ6nfJt2wB3VsdPcAAAAASUVORK5CYII=")},null,8,Y),t("span",null,A(e.name),1),(null==e?void 0:e.hot)?(l(),a("i",$,[r(o,{color:"red"},{default:c((()=>[r(i)])),_:1})])):b("",!0)]),t("p",null,A((null==e?void 0:e.desc)?null==e?void 0:e.desc:"暂无描述"),1)],8,K),t("div",ee,[k(C)?(l(),a("span",le,[r(g,{onClick:l=>{return a=e,de.value=a.name,re.value=a.href,ce.value=a.link||a.link_type,ve.value=a.hot,pe.value=a.icon,me.value=a.id,ue.value=!0,void(ie.value="edit");var a}},null,8,["onClick"])])):b("",!0),k(C)?(l(),a("span",ae,[r(w,{onClick:l=>(async e=>{if(200===(await D.deleteLink({id:e})).code)return y((()=>{fe()})),L({showClose:!0,message:"删除成功",type:"success"})})(null==e?void 0:e.id)},null,8,["onClick"])])):b("",!0)])])})),128))])],8,z);var s})),128))])])])),_:1}),r(ye,{modelValue:k(ue),"onUpdate:modelValue":s[5]||(s[5]=e=>V(ue)?ue.value=e:null),title:"add"===k(ie)?"新增":"编辑",width:"600px","destroy-on-close":"","before-close":he},{footer:c((()=>[t("span",ne,[r(Ve,{onClick:he},{default:c((()=>[h("取消")])),_:1}),r(Ve,{type:"primary",onClick:Ae},{default:c((()=>[h("确定")])),_:1})])])),default:c((()=>[t("div",null,[r(be,{ref_key:"ruleFormRef",ref:oe,"label-width":"110px"},{default:c((()=>[r(j,{label:"链接名称"},{default:c((()=>[r(_,{modelValue:k(de),"onUpdate:modelValue":s[0]||(s[0]=e=>V(de)?de.value=e:null)},null,8,["modelValue"])])),_:1}),r(j,{label:"链接"},{default:c((()=>[r(_,{modelValue:k(re),"onUpdate:modelValue":s[1]||(s[1]=e=>V(re)?re.value=e:null)},null,8,["modelValue"])])),_:1}),r(j,{label:"Icon"},{default:c((()=>[r(_,{modelValue:k(pe),"onUpdate:modelValue":s[2]||(s[2]=e=>V(pe)?pe.value=e:null)},null,8,["modelValue"])])),_:1}),r(j,{label:"类别"},{default:c((()=>[r(_,{modelValue:k(ce),"onUpdate:modelValue":s[3]||(s[3]=e=>V(ce)?ce.value=e:null)},null,8,["modelValue"])])),_:1}),te,r(j,{label:"热门"},{default:c((()=>[r(E,{modelValue:k(ve),"onUpdate:modelValue":s[4]||(s[4]=e=>V(ve)?ve.value=e:null)},null,8,["modelValue"])])),_:1})])),_:1},512)])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-1585df29"]]);export{se as default};
