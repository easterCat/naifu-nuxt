import{_ as e}from"./AppAnimate.vue_vue_type_script_setup_true_lang.eec04da4.js";import l from"./AreaTitle.41365f53.js";import{J as a,K as t,_ as s,I as n,a$ as o,r as u,x as r,a2 as i,a0 as c,u as m,Y as p,aC as v,C as d,$ as b,a4 as g,X as f,L as h,ap as y,aX as _,aY as C,ba as k,aZ as w}from"./entry.7629be39.js";import{u as x,a as j}from"./shop.55f105a8.js";import{_ as z}from"./delete.28e21da9.js";import{_ as S}from"./document-copy.b15446c4.js";import{g as V,s as $,t as J,c as Y}from"./element-plus.bf29918d.js";/* empty css                                                                  */import"./lodash.ea4d81e6.js";const A={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},N=[s("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1)];const O={name:"ep-check",render:function(e,l){return a(),t("svg",A,N)}},H={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},M=[s("path",{fill:"currentColor",d:"M384 960v-64h192.064v64H384zm448-544a350.656 350.656 0 0 1-128.32 271.424C665.344 719.04 640 763.776 640 813.504V832H320v-14.336c0-48-19.392-95.36-57.216-124.992a351.552 351.552 0 0 1-128.448-344.256c25.344-136.448 133.888-248.128 269.76-276.48A352.384 352.384 0 0 1 832 416zm-544 32c0-132.288 75.904-224 192-224v-64c-154.432 0-256 122.752-256 288h64z"},null,-1)];const B={name:"ep-opportunity",render:function(e,l){return a(),t("svg",H,M)}},L=e=>(_("data-v-fda10762"),e=e(),C(),e),D={class:"tranfer-con"},I={key:0,class:"tags-con"},P=["onClose"],R={key:1,class:"tags-con"},T=[L((()=>s("p",{class:"no-data"},"暂无列表",-1)))],U={class:"title-side"},X={key:2,class:"history-con"},q={class:"history-item"},K={style:{"font-weight":"bold","margin-bottom":"4px"}},Z={class:"history-button"},E=["onClick"],F=["onClick"],G=["onClick"],Q={key:3,class:"tags-con"},W=[L((()=>s("p",{class:"no-data"},"暂无记录",-1)))],ee=w(n({__name:"promptBeautiful",setup(n){const _="prompt_history",{$store:C}=o(),w=u(""),A=u(""),N=u([]),H=u([]),M=u(0),{copy:L}=x(),{shop:ee,setShop:le}=j();r((()=>{be()}));const ae=()=>{A.value=w.value.replace(/\s*(，+|,+)\s*/g,", "),N.value=A.value.split(",").filter((e=>!!e)).map((e=>e.trim())),de(w.value)},te=()=>{A.value=w.value.replace(/\s+/g,", "),N.value=A.value.split(",").filter((e=>!!e)).map((e=>e.trim())),de(w.value)},se=()=>{A.value=w.value.replace(/[-_]+/g," "),N.value=A.value.split(",").filter((e=>!!e)).map((e=>e.trim())),de(w.value)},ne=()=>{A.value=w.value.replace(/\{/g,"(").replace(/\}/g,")"),N.value=A.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),de(w.value)},oe=()=>{A.value=w.value.replace(/\(/g,"{").replace(/\)/g,"}"),N.value=A.value.split(/,/g).filter((e=>!!e)).map((e=>e.trim())),de(w.value)},ue=()=>{w.value=ee.value,A.value=w.value.replace(/\s*(，+|,+)\s*/g,","),N.value=A.value.split(",").filter((e=>!!e)).map((e=>e.trim())),de(w.value)},re=()=>{le(A.value)},ie=()=>{ge(),H.value=[]},ce=()=>{if(w.value.includes("masterpiece"))return Y({showClose:!0,message:"请不要重复添加",type:"warning"});w.value=`masterpiece, best quality, ${w.value}`,A.value=w.value.replace(/\s*(，+|,+)\s*/g,","),N.value=A.value.split(",").filter((e=>!!e)).map((e=>e.trim())),de(w.value)},me=()=>{w.value="",A.value="",N.value=[]},pe=()=>{w.value=N.value.join(", "),A.value=N.value.join(", ")},ve=()=>{L(A.value)},de=e=>{var l;let a=[];if(!e)return Y({showClose:!0,message:"请输入prompt",type:"warning"});C.get(_)&&(a=null!=(l=JSON.parse(C.get(_)))?l:[]);if(!a.find((l=>l.prompt===e))){if(a&&a.length&&a.length>100)return Y({showClose:!0,message:"数据超过100条",type:"warning"});a.includes(e)||a.unshift({prompt:e,time:k().format("YYYY年MM月DD日 HH时mm分ss秒")}),H.value=[...a],M.value=H.value.length,C.set(_,JSON.stringify(H.value))}},be=()=>{C.get(_)&&(H.value=JSON.parse(C.get(_)),M.value=H.value.length)},ge=()=>{C.set(_,"")};return(n,o)=>{var u,r;const k=e,x=V,j=$,Y=J,ee=l,le=B,de=O,be=S,ge=z;return a(),t("div",D,[i(k,null,{default:c((()=>[s("div",{class:"button-con"},[s("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ae},"格式化"),s("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:me},"清空"),s("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ne}," 大括号转圆括号 "),s("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:oe}," 圆括号转大括号 "),s("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ce}," 起手式 "),s("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:ue},"购物车导入"),s("button",{class:"btn btn-accent m-r-10 m-b-10",onClick:re},"导出购物车"),s("button",{class:"btn btn-secondary m-r-10 m-b-10",onClick:te}," 空格加逗号(用于danbooru) "),s("button",{class:"btn btn-secondary m-b-10",onClick:se}," 去除下划线(用于danbooru) ")])])),_:1}),i(Y,{gutter:20},{default:c((()=>[i(j,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[i(k,null,{default:c((()=>[i(x,{modelValue:m(w),"onUpdate:modelValue":o[0]||(o[0]=e=>d(w)?w.value=e:null),type:"textarea",placeholder:"请输入promit",rows:12,clearable:"",autosize:{minRows:12},"show-word-limit":"",maxlength:"3000"},null,8,["modelValue"])])),_:1})])),_:1}),i(j,{xs:24,sm:12,md:12,lg:12,xl:12},{default:c((()=>[i(k,null,{default:c((()=>[i(x,{modelValue:m(A),"onUpdate:modelValue":o[1]||(o[1]=e=>d(A)?A.value=e:null),type:"textarea",placeholder:"输出prompt",rows:12,autosize:{minRows:12},readonly:"","show-word-limit":"",maxlength:"3000",onClick:ve},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(ee,{title:"Prompt列表"}),m(N)&&(null==(u=m(N))?void 0:u.length)?(a(),t("div",I,[s("div",{class:"m-b-10"},[s("button",{class:"btn btn-md btn-accent",onClick:pe}," 当前tags替换prompt ")]),(a(!0),t(p,null,v(m(N),((e,l)=>(a(),b(k,{key:l},{default:c((()=>[s("button",{class:"btn btn-sm btn-secondary m-r-10 m-b-10",onClose:e=>{return a=l,void N.value.splice(a,1);var a}},g(e),41,P)])),_:2},1024)))),128))])):(a(),t("div",R,T)),i(ee,{title:"Prompt记录"},{titleSide:c((()=>[s("span",U,"总数:"+g(m(M))+"条",1)])),_:1}),m(H)&&(null==(r=m(H))?void 0:r.length)?(a(),t("div",X,[i(k,null,{default:c((()=>[s("div",{class:"button-con"},[s("button",{class:"btn btn-md btn-accent m-b-15",onClick:ie}," 清空历史 ")])])),_:1}),(a(!0),t(p,null,v(m(H),((e,l)=>(a(),b(k,{key:l},{default:c((()=>[s("div",q,[s("p",K,[0===l?(a(),b(le,{key:0,style:{color:"#67c23a","font-size":"12px"}})):f("",!0),s("span",null,g(null==e?void 0:e.time),1)]),s("p",null,g(null==e?void 0:e.prompt),1),s("div",Z,[s("button",{class:"btn btn-sm btn-primary m-r-10",onClick:l=>{return a=null==e?void 0:e.prompt,void(w.value=a);var a}},[h(n.$slots,"icon",{},(()=>[i(de,{class:"m-r-4"})]),!0),y(" 选择 ")],8,E),s("button",{class:"btn btn-sm btn-accent m-r-10",onClick:l=>m(L)(null==e?void 0:e.prompt)},[h(n.$slots,"icon",{},(()=>[i(be,{class:"m-r-4"})]),!0),y(" 复制 ")],8,F),s("button",{class:"btn btn-sm btn-secondary",onClick:e=>(e=>{var l;const a=null!=(l=JSON.parse(C.get(_)))?l:[];a.splice(e,1),H.value=[...a],M.value=0,C.set(_,JSON.stringify(H.value))})(l)},[h(n.$slots,"icon",{},(()=>[i(ge,{class:"m-r-4"})]),!0),y(" 删除 ")],8,G)])])])),_:2},1024)))),128))])):(a(),t("div",Q,W))])}}}),[["__scopeId","data-v-fda10762"]]);export{ee as default};
