import a from"./Icon.fa57f76f.js";import{_ as e}from"./AppAnimate.vue_vue_type_script_setup_true_lang.2fe52f8d.js";import{a as l,_ as s}from"./entry.d71b1392.js";import{u as t}from"./index.131f7cc9.js";import{h as i,C as o,r as n}from"./pinia.17670579.js";import{e as c,U as d,r as u,a as m,w as r,f as v,G as p,H as k,J as y,L as f,Y as C,Z as h,u as b,_ as g,$ as _,a0 as j,W as x,a1 as z,i as S,I as w,a2 as E,a3 as V,a4 as T,a5 as O,a6 as A}from"./element-plus.fe53e503.js";import{u as G,a as I}from"./shop.d3010ead.js";import{_ as N}from"./document-copy.d0e58c3c.js";import{_ as U}from"./shopping-trolley.ded7af5a.js";import{_ as $,a as B,b as L}from"./plus.c0ce5731.js";import{_ as H,a as R,b as J}from"./arrow-left-bold.258d4eb7.js";import{d as D}from"./vuedraggable.03145536.js";import{u as K}from"./uuid.d56aad75.js";import"./lodash.cb875ed5.js";import"./dayjs.3bf4ac2a.js";import"./store.e5acb8cd.js";import"./vue3-clipboard-es.62b9b053.js";import"./sortablejs.91a11583.js";const W=a=>(O("data-v-78c26d29"),a=a(),A(),a),Y={class:"header"},Z={class:"back"},q={class:"header-center"},F={class:"header-right"},M={class:"body"},P={class:"left"},Q={class:"left-layer1"},X=W((()=>h("div",{class:"layer-top"},"数据来源",-1))),aa={class:"layer-bottom"},ea=W((()=>h("div",{class:"layer-top"},"标签类别",-1))),la={key:0,class:"type-list"},sa=["onClick"],ta={key:1,class:"type-list"},ia=["onClick"],oa={class:"center"},na={class:"shop-card-con"},ca={class:"shop-item"},da={class:"tran-text"},ua={class:"right"},ma={class:"tag-list"},ra={class:"text-con"},va={class:"zh"},pa={class:"text-con"},ka={class:"zh"},ya={key:0,class:"import-wrapper"},fa={class:"import-layer"},Ca={class:"import-button"},ha=s(c({__name:"index",props:["modelValue"],async setup(s){let c,O;const{DefaultTagsApi:A}=t(),W=([c,O]=d((()=>A.getTags())),c=await c,O(),c),ha=JSON.parse(W),ba=i().public.GELBOORU_TOKEN,ga=u({animation:400,group:"people",disabled:!1,ghostClass:"ghost"}),{GelbooruApi:_a,ShopApi:ja}=t(),xa=o(),za=n(),Sa=m("1"),wa=m(""),Ea=m(!1),Va=m(1),Ta=m(0),{copy:Oa}=G(),{addShop:Aa,renameShopName:Ga,shopList:Ia,shop:Na,onlySetShop:Ua,initShop:$a,setShop:Ba,clearShop:La,removeShopByName:Ha,copyShop:Ra,addOneCircle:Ja,removeOneCircle:Da,createNewShopItem:Ka}=I(),Wa=m(ha.class),Ya=m(Wa.value[0].data),Za=m([]),qa=m([]);r(Ia,(a=>{"pc-design"===xa.name&&Ua(a.map((a=>a.text)).join(", "))}));const Fa=()=>{za.go(-1)},Ma=()=>{za.replace("/pc/home")},Pa=()=>{Ea.value=!0},Qa=()=>{Ba(wa.value),Ea.value=!1},Xa=async()=>{var a;const e=await ja.translate({text:Na.value,type:1});(null==(a=null==e?void 0:e.data)?void 0:a.translateText).split("，").forEach(((a,e)=>{Ia.value[e].translateText=a}))},ae=a=>{Va.value=a,Ta.value=0,2===a&&(async()=>{const a=await _a.getList();Za.value=a.data})()},ee=async(a,e)=>{if(1===Va.value)Ya.value=Wa.value[a].data,Ta.value=a;else if(2===Va.value){const l=await _a.getTagsById({token:ba,page:1,limit:100,category_id:e});Ta.value=a,qa.value=l.data}};return v((()=>{$a()})),(s,t)=>{const i=H,o=R,n=a,c=T.ElRadio,d=T.ElRadioGroup,u=$,m=B,r=J,v=L,O=U,A=T.ElButton,G=N,I=e,W=l;return p(),k("div",{class:C(["design-page page",{white:"2"===Sa.value}])},[y(W,{name:"mobile"},{default:f((()=>[h("div",Y,[h("div",Z,[y(i,{onClick:Fa}),y(o,{onClick:Ma})]),h("div",q,[y(n,{size:"20",name:"material-symbols:shopping-cart",onClick:Pa}),y(n,{size:"24",name:"material-symbols:new-label-rounded",onClick:b(Ka)},null,8,["onClick"]),y(n,{size:"20",name:"material-symbols:content-copy-rounded",onClick:b(Ra)},null,8,["onClick"]),y(n,{size:"19",name:"majesticons:translate",onClick:Xa}),y(n,{size:"20",name:"material-symbols:delete",onClick:b(La)},null,8,["onClick"])]),h("div",F,[y(d,{modelValue:Sa.value,"onUpdate:modelValue":t[0]||(t[0]=a=>Sa.value=a),class:"ml-4"},{default:f((()=>[y(c,{label:"1",size:"large"},{default:f((()=>[g("深色")])),_:1}),y(c,{label:"2",size:"large"},{default:f((()=>[g("浅色")])),_:1})])),_:1},8,["modelValue"])])]),h("div",M,[h("div",P,[h("div",Q,[X,h("div",aa,[h("div",{class:C(["left-menu",{"item-active":1===Va.value}]),onClick:t[1]||(t[1]=a=>ae(1))}," 常规标签 ",2),h("div",{class:C(["left-menu",{"item-active":2===Va.value}]),onClick:t[2]||(t[2]=a=>ae(2))}," Gelbooru标签 ",2),h("div",{class:C(["left-menu",{"item-active":3===Va.value}]),onClick:t[3]||(t[3]=a=>ae(3))}," EH标签(500个) ",2),h("div",{class:C(["left-menu",{"item-active":4===Va.value}]),onClick:t[4]||(t[4]=a=>ae(4))}," EH标签(31000个) ",2)]),ea,1===Va.value?(p(),k("div",la,[(p(!0),k(_,null,j(Wa.value,((a,e)=>(p(),k("div",{key:e,class:C(["type-item",{"type-item-active ":e===Ta.value}]),onClick:a=>ee(e)},x(null==a?void 0:a.name),11,sa)))),128))])):z("",!0),2===Va.value?(p(),k("div",ta,[(p(!0),k(_,null,j(Za.value,((a,e)=>(p(),k("div",{key:e,class:C(["type-item",{"type-item-active ":e===Ta.value}]),onClick:l=>ee(e,null==a?void 0:a.id)},x(null==a?void 0:a.name)+"("+x(null==a?void 0:a.level)+") ",11,ia)))),128))])):z("",!0)])]),h("div",oa,[h("div",na,[y(b(D),{modelValue:b(Ia),"onUpdate:modelValue":t[5]||(t[5]=a=>S(Ia)?Ia.value=a:null),"component-data":{name:"list"},"drag-options":b(ga),"item-key":a=>{(a=>{K.v4()})(a)}},{item:f((({element:a})=>[h("div",ca,[h("div",null,[h("span",null,x(a.text),1),h("span",da,x(a.translateText),1),y(u,{class:"add",onClick:e=>b(Ja)(a.text)},null,8,["onClick"]),y(m,{class:"minus",onClick:e=>b(Da)(a.text)},null,8,["onClick"]),y(r,{class:"remove",onClick:e=>b(Ga)(a.text)},null,8,["onClick"]),y(v,{class:"remove",onClick:e=>b(Ha)(a.text)},null,8,["onClick"])])])])),_:1},8,["modelValue","drag-options","item-key"])])]),h("div",ua,[h("div",ma,[1===Va.value?(p(!0),k(_,{key:0},j(Ya.value,((a,e)=>(p(),k("div",{key:e,class:"tag-item"},[h("div",ra,[h("p",va,x(null==a?void 0:a.zh)+" "+x(null==a?void 0:a.en),1)]),h("div",null,[y(A,{size:"small",circle:"",onClick:e=>b(Aa)(null==a?void 0:a.en)},{default:f((()=>[w(s.$slots,"icon",{},(()=>[y(O)]),!0)])),_:2},1032,["onClick"]),y(A,{size:"small",circle:"",onClick:e=>b(Oa)(null==a?void 0:a.en)},{default:f((()=>[w(s.$slots,"icon",{},(()=>[y(G)]),!0)])),_:2},1032,["onClick"])])])))),128)):z("",!0),2===Va.value?(p(!0),k(_,{key:1},j(qa.value,((a,e)=>(p(),k("div",{key:e,class:"tag-item"},[h("div",pa,[h("p",ka,x(null==a?void 0:a.t_name)+" "+x(null==a?void 0:a.name),1)]),h("div",null,[y(A,{size:"small",circle:"",onClick:e=>b(Aa)(null==a?void 0:a.en)},{default:f((()=>[w(s.$slots,"icon",{},(()=>[y(O)]),!0)])),_:2},1032,["onClick"]),y(A,{size:"small",circle:"",onClick:e=>b(Oa)(null==a?void 0:a.en)},{default:f((()=>[w(s.$slots,"icon",{},(()=>[y(G)]),!0)])),_:2},1032,["onClick"])])])))),128)):z("",!0)])])]),y(I,null,{default:f((()=>[Ea.value?(p(),k("div",ya,[h("div",fa,[E(h("textarea",{"onUpdate:modelValue":t[6]||(t[6]=a=>wa.value=a),type:"text"},null,512),[[V,wa.value]])]),h("div",Ca,[h("button",{onClick:t[7]||(t[7]=()=>Ea.value=!1)},"取消"),h("button",{onClick:Qa},"确定")])])):z("",!0)])),_:1})])),_:3})],2)}}}),[["__scopeId","data-v-78c26d29"]]);export{ha as default};
