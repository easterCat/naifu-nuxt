import{_ as e,a as t,b as l}from"./AppHeader.a98b11ad.js";import{_ as a}from"./FixMenu.vue_vue_type_style_index_0_scoped_c1cb519f_lang.c5d3af51.js";import n from"./AppBanner.faab1ef2.js";import o from"./AreaTitle.1e0e7e18.js";import s from"./TemplateDetail.14d1b069.js";import{u as i,a as u}from"./shop.8f25176c.js";import{u as c}from"./index.c0d6e22f.js";import{I as r}from"./pinia.7ac5f2a7.js";import{_ as m}from"./document-copy.9ed563a4.js";import{_ as d}from"./shopping-trolley.5f2a9482.js";import{e as p,r as v,a as b,f,b as g,F as _,G as y,H as h,I as k,W as j,u as x,_ as C,Y as w,Z as N,a9 as E,a4 as I,L as A,X as S,U as z,$ as U}from"./element-plus.3e7898c2.js";import{l as T}from"./lodash.93025024.js";import{_ as V}from"./entry.cf5e7fb4.js";import"./plus.bb77e419.js";import"./vuedraggable.5801950c.js";import"./dayjs.3bf4ac2a.js";import"./sortablejs.c8011fea.js";import"./uuid.d56aad75.js";/* empty css                                                                  *//* empty css                                                                  */import"./Icon.c7cf7b12.js";import"./store.e5acb8cd.js";import"./sYw7uX71Xe.38399cea.js";const H={class:"chitu-tags-page page"},X={class:"content"},F={class:"type-list"},L={key:0,class:"tag-list"},Y=["data-index"],$={key:0,class:"image-con"},q={class:"text-con"},B={key:0,class:"en"},D={key:1,class:"en"},G={class:"button-con"},J=["onClick"],M=["onClick"],O={key:1,class:"tag-list"},R=["data-index"],W={key:0,class:"image-con"},Z={class:"text-con"},K={key:0,class:"en"},P={key:1,class:"en"},Q={class:"button-con"},ee=["onClick"],te=["onClick"],le={key:2,class:"tag-list"},ae=["data-index"],ne={key:0,class:"image-con"},oe={class:"text-con"},se={key:0,class:"en"},ie={key:1,class:"en"},ue={class:"button-con"},ce=["onClick"],re=["onClick"],me=V(p({__name:"chitu",setup(p){const{copy:V}=i(),{addShop:me}=u(),{TemplateApi:de}=c(),pe=async e=>{const t=(await r(e,"$XHYNvCeXRl")).data;return JSON.parse(t._rawValue)},ve=v([{name:"参考图",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_cankaotu.json")},{name:"人物",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huageren.json")},{name:"物体",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huagewuti.json")},{name:"构图",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_goutu.json")},{name:"画风",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huafeng.json")},{name:"正面词组",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_zhengmiantag.json")},{name:"负面词组",file:pe("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_fumiantag.json")}]),be=b([]),fe=b(0),ge=b(!0),_e=b(""),ye=b({}),he=b(!1),ke=b(1),je=b(50),xe=b(window.document.body);let Ce=[],we=0;const Ne=async()=>{const e=await de.getTemplatesChitu({pageIndex:ke.value,pageSize:je.value});be.value=[...be.value,...(null==e?void 0:e.templates)?e.templates:[]]},Ee=e=>{fe.value?(ye.value={author:e.author,n_prompt:e.n_prompt,preview:e.preview,model:e.model,prompt:e.prompt,prompt_zh:e.prompt_zh,name:e.name,desc:e.desc},he.value=!0):(ye.value={name:e.name,author:e.author,preview:e.preview,prompt:e.prompt,prompt_zh:e.prompt_zh,n_prompt:e.n_prompt,model:e.model,desc:e.desc,like:e.like},he.value=!0)},Ie=e=>{_e.value=e},Ae=()=>{be.value=be.value.concat(Ce.slice(50*we,50*(we+1)))},Se=T.throttle((()=>{const e=xe.value.scrollTop;xe.value.scrollHeight-(e+(document.documentElement.clientHeight||document.body.clientHeight))<=100&&(console.log("触底"),fe.value?(we++,Ae()):(ke.value++,Ne()))}),1500);return f((async()=>{Ne(),xe.value=document.querySelector(".chitu-tags-page"),xe.value.addEventListener("scroll",Se)})),g((()=>{xe.value.removeEventListener("scroll",Se)})),(i,u)=>{const c=e,r=a,p=n,v=o,b=t,f=U.ElSwitch,g=l,T=U.ElTooltip,de=d,pe=m,_e=s,je=E("animate-css");return _(),y("div",H,[h(r,null,{default:k((()=>[h(c)])),_:1}),j("div",X,[h(p,{placeholder:"搜索标签",onSearchChange:Ie}),h(v,{title:"标签类别"}),j("div",F,[h(r,null,{default:k((()=>[(_(!0),y(w,null,N(x(ve),((e,t)=>I((_(),A(b,{key:t,index:t+"","button-style":1,"button-size":"larger",class:S([t===fe.value?"btn-accent":"btn-primary-30"]),"button-text":null==e?void 0:e.name,onSubmit:e=>(async e=>{we=0,ke.value=1,fe.value||0===fe.value?(fe.value=e,be.value=[],Ce=await ve[e].file,Ae()):Ne()})(t)},null,8,["index","class","button-text","onSubmit"])),[[je,{direction:"modifySlideInUp",delay:40*t}]]))),128))])),_:1})]),h(v,{title:"标签列表"},{titleSide:k((()=>[h(f,{modelValue:ge.value,"onUpdate:modelValue":u[0]||(u[0]=e=>ge.value=e),size:"large","inline-prompt":"","inactive-text":"隐藏Image","active-text":"开启Image",class:"title-side"},null,8,["modelValue"])])),_:1}),x(we)?(_(),y("div",L,[h(r,null,{default:k((()=>[(_(!0),y(w,null,N(be.value,((e,t)=>{var l;return I((_(),y("div",{key:t,class:"tag-item-img ll-media bg-base-100","data-index":t},[ge.value&&5!==fe.value&&6!==fe.value?(_(),y("div",$,[h(g,{src:null!=(l=null==e?void 0:e.minify_preview)?l:"",loading:"lazy",onClick:t=>Ee(e)},null,8,["src","onClick"])])):C("",!0),j("div",q,[h(T,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:k((()=>[(null==e?void 0:e.title)?(_(),y("p",B,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(_(),y("p",D,z((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),j("div",G,[j("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:t=>x(me)(null==e?void 0:e.promptEN)},[h(de)],8,J),j("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:t=>x(V)(null==e?void 0:e.promptEN)},[h(pe)],8,M)])],8,Y)),[[je,{direction:"modifySlideInUp",delay:40*t}]])})),128))])),_:1})])):C("",!0),fe.value?(_(),y("div",O,[h(r,null,{default:k((()=>[(_(!0),y(w,null,N(be.value,((e,t)=>I((_(),y("div",{class:"tag-item-img ll-media bg-base-100","data-index":t,key:t},[ge.value&&5!==fe.value&&6!==fe.value?(_(),y("div",W,[(null==e?void 0:e.fileUrl)?(_(),A(g,{key:0,src:null==e?void 0:e.fileUrl,loading:"lazy",onClick:t=>Ee(e)},null,8,["src","onClick"])):C("",!0)])):C("",!0),j("div",Z,[h(T,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:k((()=>[(null==e?void 0:e.title)?(_(),y("p",K,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(_(),y("p",P,z((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),j("div",Q,[j("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:t=>x(me)(null==e?void 0:e.promptEN)},[h(de)],8,ee),j("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:t=>x(V)(null==e?void 0:e.promptEN)},[h(pe)],8,te)])],8,R)),[[je,{direction:"modifySlideInUp",delay:40*t}]]))),128))])),_:1})])):(_(),y("div",le,[(_(!0),y(w,null,N(be.value,((e,t)=>(_(),y("div",{class:"tag-item-img ll-media bg-base-100","data-index":t,key:t},[ge.value&&5!==fe.value&&6!==fe.value?(_(),y("div",ne,[(null==e?void 0:e.file1)?(_(),A(g,{key:0,src:null==e?void 0:e.file1,onClick:t=>Ee(e)},null,8,["src","onClick"])):C("",!0)])):C("",!0),j("div",oe,[h(T,{class:"box-item",effect:"dark",content:null==e?void 0:e.prompt,placement:"top"},{default:k((()=>[(null==e?void 0:e.title)?(_(),y("p",se,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(_(),y("p",ie,z((null==e?void 0:e.prompt.length)>24?(null==e?void 0:e.prompt.slice(0,24))+"...":null==e?void 0:e.prompt),1))])),_:2},1032,["content"])]),j("div",ue,[j("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:t=>x(me)(null==e?void 0:e.prompt)},[h(de)],8,ce),j("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:t=>x(V)(null==e?void 0:e.prompt)},[h(pe)],8,re)])],8,ae)))),128))]))]),h(_e,{modelValue:he.value,"onUpdate:modelValue":u[1]||(u[1]=e=>he.value=e),"current-template":ye.value},null,8,["modelValue","current-template"])])}}}),[["__scopeId","data-v-e19c3353"]]);export{me as default};
