import e from"./AreaTitle.dc73a93c.js";import{u as a}from"./index.131f7cc9.js";import{u as l,a as t}from"./shop.d3010ead.js";import{C as s}from"./pinia.17670579.js";import{e as n,a as o,r as u,w as r,G as i,H as d,J as c,L as v,Z as p,Y as m,a1 as b,N as f,u as g,a4 as h,$ as y,a0 as _,W as k,I as w,_ as j,a5 as C,a6 as z}from"./element-plus.fe53e503.js";import{_ as x}from"./document-copy.d0e58c3c.js";import{_ as E}from"./shopping-trolley.ded7af5a.js";import{d as T,_ as M}from"./entry.d71b1392.js";/* empty css                                                                  */import"./lodash.cb875ed5.js";import"./dayjs.3bf4ac2a.js";import"./store.e5acb8cd.js";import"./uuid.d56aad75.js";import"./vue3-clipboard-es.62b9b053.js";const S={class:"eh-con"},H=(e=>(C("data-v-ea0f0f30"),e=e(),z(),e))((()=>p("span",{class:"eh-title-side-tip"},"(31813个标签版本,高h,慎重)",-1))),L={key:0,class:"flex justify-between m-b-10"},V={class:"control-blur-btns"},$={class:"m-r-12"},A=["innerHTML"],U=["innerHTML"],J={key:2,class:"demo-pagination-block"},N=M(n({__name:"eHentaiMore",props:{searchText:{type:String,default:""}},setup(n){const C=n,{EhttApi:z}=a(),{copy:M}=l(),{addShop:N}=t(),O=s(),R=o(!1),D=o(!1),I=o(1),W=o(20),B=o(0),G=o("hidden"),P=o(""),Y=o([]);let Z=u([]),q=u([]),F=u([]),K=u([]),Q=u({data:[]});const X=new Worker("/naifu/worker.js");X.onmessage=function(e){const{type:a,data:l}=e.data;"all"===a&&(q=l,F=l,B.value=F.length,te()),"select"===a&&(F=l,B.value=F.length,te()),"search"===a&&(F=l,B.value=F.length,te())},X.onerror=function(e){console.log(["worker ERROR: Line ",e.lineno," in ",e.filename,": ",e.message].join(""))},r(R,(e=>{"pc-tags-eh"===O.name&&e&&!D.value&&(D.value=!0,ee())})),r(C,(e=>{"pc-tags-eh"===O.name&&se(e.searchText)})),r(P,(async e=>{"pc-tags-eh"===O.name&&X.postMessage({type:"select",data:q,select:e})}));const ee=async()=>{Q=await z.getNameSpaceList(),Y.value=Q.data;const e=await z.getAllJsonData();Z=JSON.parse(e).data,X.postMessage({type:"all",data:Z})},ae=e=>{W.value=e,I.value=1,te()},le=e=>{I.value=e,te()},te=()=>{K=F.slice((I.value-1)*W.value,I.value*W.value),console.log("tableData :>> ",K)},se=T((e=>{P.value="",X.postMessage({type:"search",data:q,search:e})}),1500);return(a,l)=>{const t=h.ElSwitch,s=e,n=h.ElOption,o=h.ElSelect,u=h.ElTableColumn,r=E,C=h.ElButton,z=x,T=h.ElTable,O=h.ElPagination;return i(),d("div",S,[c(s,{title:"EH超多标签列表"},{titleSide:v((()=>[c(t,{modelValue:R.value,"onUpdate:modelValue":l[0]||(l[0]=e=>R.value=e),size:"large","inline-prompt":"","inactive-text":"隐藏","active-text":"开启",class:"title-side"},null,8,["modelValue"]),H])),_:1}),R.value?(i(),d("div",L,[c(o,{modelValue:P.value,"onUpdate:modelValue":l[1]||(l[1]=e=>P.value=e),class:"m-2",placeholder:"命名空间",size:"large"},{default:v((()=>[(i(!0),d(y,null,_(Y.value,(e=>{var a;return i(),f(n,{key:e.value,label:`${null==e?void 0:e.namespace} ${null==(a=null==e?void 0:e.frontMatters)?void 0:a.name} ${null==e?void 0:e.count}条`,value:e.namespace},null,8,["label","value"])})),128))])),_:1},8,["modelValue"]),p("div",V,[p("button",{class:m(["btn btn-sm m-r-10",["hidden"===G.value?"btn-accent":"btn-secondary-30"]]),onClick:l[2]||(l[2]=()=>G.value="hidden")}," 隐藏 ",2),p("button",{class:m(["btn btn-sm m-r-10",["flur"===G.value?"btn-accent":"btn-secondary-30"]]),onClick:l[3]||(l[3]=()=>G.value="flur")}," 模糊 ",2),p("button",{class:m(["btn btn-sm m-r-10",["show"===G.value?"btn-accent":"btn-secondary-30"]]),onClick:l[4]||(l[4]=()=>G.value="show")}," 缩小 ",2),p("button",{class:m(["btn btn-sm",["default"===G.value?"btn-accent":"btn-secondary-30"]]),onClick:l[5]||(l[5]=()=>G.value="default")}," 原图 ",2)])])):b("",!0),R.value?(i(),f(T,{key:1,class:"m-b-10",data:g(K),border:"",stripe:"",size:"large",style:{width:"100%"}},{default:v((()=>[c(u,{prop:"namespace",label:"命名空间",width:"130"}),c(u,{prop:"key",label:"原始标签",width:"270"},{default:v((e=>{var l;return[p("span",$,k((null==(l=e.row)?void 0:l.key)||""),1),c(C,{size:"small",circle:"",onClick:a=>{var l;return g(N)((null==(l=e.row)?void 0:l.key)||"")}},{default:v((()=>[w(a.$slots,"icon",{},(()=>[c(r)]),!0)])),_:2},1032,["onClick"]),c(C,{size:"small",circle:"",onClick:a=>{var l;return g(M)((null==(l=e.row)?void 0:l.key)||"")}},{default:v((()=>[w(a.$slots,"icon",{},(()=>[c(z)]),!0)])),_:2},1032,["onClick"])]})),_:3}),c(u,{prop:"value",label:"名称",width:"170"},{default:v((e=>{var a,l,t;return[j(k((null==(t=null==(l=null==(a=e.row)?void 0:a.value)?void 0:l.name)?void 0:t.text)||""),1)]})),_:1}),c(u,{prop:"value",label:"描述"},{default:v((e=>{var a,l,t;return[p("div",{class:m(["table-intro",{"show-img":"show"===G.value,"hidden-img":"hidden"===G.value,"flur-img":"flur"===G.value,"default-img":"default"===G.value}]),innerHTML:(null==(t=null==(l=null==(a=e.row)?void 0:a.value)?void 0:l.intro)?void 0:t.html)||""},null,10,A)]})),_:1}),c(u,{prop:"value",label:"数据库页面",width:"180"},{default:v((e=>{var a,l,t;return[p("div",{innerHTML:(null==(t=null==(l=null==(a=e.row)?void 0:a.value)?void 0:l.links)?void 0:t.html.replace(/(<a)/g,"<a target='_blank'"))||""},null,8,U)]})),_:1})])),_:3},8,["data"])):b("",!0),R.value?(i(),d("div",J,[c(O,{"current-page":I.value,"onUpdate:current-page":l[6]||(l[6]=e=>I.value=e),"page-size":W.value,"onUpdate:page-size":l[7]||(l[7]=e=>W.value=e),"page-sizes":[20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:B.value,onSizeChange:ae,onCurrentChange:le},null,8,["current-page","page-size","total"])])):b("",!0)])}}}),[["__scopeId","data-v-ea0f0f30"]]);export{N as default};
