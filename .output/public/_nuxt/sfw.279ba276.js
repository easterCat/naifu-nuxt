import e from"./AppHeader.72be329c.js";import a from"./client-only.36cb5329.js";import l from"./AppBanner.624179b3.js";import t from"./ImageFlur.2b071b05.js";import{_ as s}from"./AppHeader.vue_vue_type_style_index_0_scoped_2a3485e7_lang.1dee27ff.js";import n from"./TemplateDetail.606dfedb.js";import{u as o}from"./pinia.17670579.js";import{e as i,ad as u,a as p,f as r,d,G as c,H as v,J as m,L as _,Z as b,u as g,$ as f,a0 as y,a1 as j,Y as h,W as k,ae as x,i as C,aa as w,N as A,a2 as I,a4 as T}from"./element-plus.fe53e503.js";import{a as S}from"./shop.d3010ead.js";import{u as B,a as F}from"./index.131f7cc9.js";import{l as M}from"./lodash.cb875ed5.js";import{_ as H}from"./entry.0f1f4d34.js";import"./ShopLayer.4b6bca95.js";import"./AnimationButton.accfedd7.js";import"./dayjs.3bf4ac2a.js";import"./store.e5acb8cd.js";import"./AppAnimate.vue_vue_type_script_setup_true_lang.c1c03cdc.js";import"./plus.c0ce5731.js";import"./close-bold.ada4cf83.js";import"./vuedraggable.03145536.js";import"./sortablejs.91a11583.js";import"./uuid.d56aad75.js";import"./vue3-clipboard-es.62b9b053.js";import"./AppHeader.vue_vue_type_style_index_0_scoped_e57bc06e_lang.5cf572d0.js";/* empty css                                                              *//* empty css                                                                  *//* empty css                                                                       *//* empty css                                                                  *//* empty css                                                                  */import"./Icon.b50eae24.js";import"./LinkList.vue_vue_type_style_index_0_scoped_ca6c464e_lang.c2f4371d.js";/* empty css                                                                */import"./04.e372062b.js";import"./sYw7uX71Xe.38399cea.js";import"./copy-document.12769081.js";const L={class:"template-page page"},z={class:"content"},V={class:"banner-con"},D={key:0,class:"shadow-xl card card-compact bg-base-100 glass"},E={class:"card-body"},G={class:"card-title"},K={class:"justify-end card-actions"},N=["onClick"],U=["onClick"],X=["onClick"],Y={class:"demo-pagination-block"},$={key:0,class:"btn-group"},q=["onClick"],J={key:0,class:"btn"},R=["value","onKeyup"],W=H(i({__name:"sfw",setup(i){o().vueApp.provide(u,{prefix:Math.floor(1e3*Math.random()),current:0});const{setShop:H}=S(),{TemplateApi:W}=B();let Z=null;const O=p(!1),P=p(1),Q=p(36),ee=p(0),ae=p(0),le=p(!1),te=p([]),se=p(null),ne=p("high"),oe=p("");r((()=>{Z=F(),pe()}));const ie=d((()=>Array.from({length:ee.value},((e,a)=>a)).slice(P.value>3?P.value-3:P.value,P.value+3))),ue=e=>{ne.value=e},pe=async()=>{if(O.value)return;O.value=!0;const{TemplateApi:e}=B(),a=await e.getTemplates({pageIndex:P.value,pageSize:Q.value});O.value=!1,te.value=null==a?void 0:a.templates,ae.value=a.total,ee.value=Math.ceil(ae.value/Q.value)},re=M.debounce((async e=>{if(e===oe.value)return;te.value=[],oe.value=e,O.value=!0;const a=await W.getTemplates({pageIndex:P.value,pageSize:Q.value,searchTag:oe.value});O.value=!1,te.value=(null==a?void 0:a.templates)&&0!==(null==a?void 0:a.templates.length)?null==a?void 0:a.templates:[]}),1200),de=e=>{P.value=e,pe()},ce=()=>{P.value<=1||(P.value=P.value-1,pe())},ve=()=>{P.value=1,pe()},me=()=>{P.value=ee.value,pe()},_e=e=>{de(Number(e.target.value))},be=()=>{P.value>=ee.value||(P.value=P.value+1,pe())};return(o,i)=>{const u=e,p=a,r=l,d=t,S=s,B=T.ElCol,F=T.ElRow,M=n,O=w("animate-css");return c(),v("div",L,[m(p,null,{default:_((()=>[m(u)])),_:1}),b("div",z,[b("div",V,[m(r,{placeholder:"请输入关键标签",onSearchChange:g(re)},null,8,["onSearchChange"])]),m(d,{onGetImageFlur:ue}),m(p,null,{default:_((()=>[g(te)&&g(te).length?(c(),A(F,{key:0,class:"list-con",gutter:20},{default:_((()=>[(c(!0),v(f,null,y(g(te),((e,a)=>I((c(),A(B,{key:a,xs:24,sm:12,md:6,lg:4,xl:4},{default:_((()=>{var a;return[e?(c(),v("div",D,[b("figure",null,[m(S,{class:h(["image",{"high-image-blur":"high"===g(ne),"low-image-blur":"low"===g(ne)}]),src:(null==e?void 0:e.min_imgbb_url)?null==e?void 0:e.min_imgbb_url:null==e?void 0:e.minify_preview,loading:"lazy"},null,8,["src","class"])]),b("div",E,[b("h2",G,k(null==e?void 0:e.name),1),b("p",null,k(null==e?void 0:e.author),1),b("div",K,[b("button",{class:"btn btn-secondary btn-sm",onClick:a=>(async e=>{const a=await W.likeTemplateById({templateId:e,userId:null==Z?void 0:Z.userId});200===a.code&&Z.addFavoriteById(a.data)})(null==e?void 0:e.id)},k((null==(a=g(Z).favoriteIds)?void 0:a.includes((null==e?void 0:e.id)+""))?"取消收藏":"收藏"),9,N),b("button",{class:"btn btn-accent btn-sm",onClick:a=>(e=>{var a;(null==e?void 0:e.prompt.includes("masterpiece"))||(null==e?void 0:e.prompt.includes("Masterpiece"))?H(null==e?void 0:e.prompt):H(`masterpiece, best quality, ${a=null==e?void 0:e.prompt,a.replace(/\s+/g,", ").replace(/\s*(，+|,+)\s*/g,", ")}`)})(e)}," 购物车 ",8,U),b("button",{class:"btn btn-primary btn-sm",onClick:a=>(e=>{se.value={...e,preview:(null==e?void 0:e.imgbb_url)?null==e?void 0:e.imgbb_url:null==e?void 0:e.preview},le.value=!0})(e)}," 详情 ",8,X)])])])):j("",!0)]})),_:2},1024)),[[O,{direction:"modifySlideInUp",delay:30*a}]]))),128))])),_:1})):j("",!0)])),_:1}),b("div",Y,[g(ee)&&g(ee)>0?(c(),v("div",$,[b("button",{class:"btn btn-outline",onClick:ve},"首页"),b("button",{class:"btn btn-outline",onClick:ce},"上一页"),(c(!0),v(f,null,y(g(ie),((e,a)=>(c(),v("button",{key:a,class:h(["btn",{"btn-active":e===g(P)}]),onClick:a=>de(e)},k(e),11,q)))),128)),g(P)<g(ee)-3?(c(),v("button",J,"...")):j("",!0),b("button",{class:h(["btn",{"btn-active":g(ee)===g(P)}]),onClick:i[0]||(i[0]=e=>de(g(ee)))},k(g(ee)),3),b("button",{class:"btn btn-outline",onClick:be},"下一页"),b("button",{class:"btn btn-outline",onClick:me},"尾页"),b("input",{value:g(P),type:"text",placeholder:"go",class:"w-24 max-w-xs input input-bordered",onKeyup:x(_e,["enter"])},null,40,R)])):j("",!0)])]),m(M,{modelValue:g(le),"onUpdate:modelValue":i[1]||(i[1]=e=>C(le)?le.value=e:null),"current-template":g(se)},null,8,["modelValue","current-template"])])}}}),[["__scopeId","data-v-bb4898a9"]]);export{W as default};
