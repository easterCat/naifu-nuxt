import e from"./AppHeader.545ee8fd.js";import t from"./client-only.36cb5329.js";import l from"./AppBanner.6a15b2e5.js";import a from"./AreaTitle.d2cca97e.js";import n from"./AnimationButton.accfedd7.js";import{_ as o}from"./AppHeader.vue_vue_type_style_index_0_scoped_2a3485e7_lang.1dee27ff.js";import i from"./TemplateDetail.b26b7bae.js";import{u as s,a as u}from"./shop.d3010ead.js";import{u as c}from"./index.131f7cc9.js";import{J as r}from"./pinia.17670579.js";import{_ as p}from"./document-copy.d0e58c3c.js";import{_ as d}from"./shopping-trolley.ded7af5a.js";import{e as m,r as v,a as b,f as _,b as g,G as f,H as y,J as h,L as j,Z as k,a2 as x,N as C,u as N,a1 as A,$ as w,a0 as E,aa as I,Y as S,W as z,a4 as U}from"./element-plus.fe53e503.js";import{l as T}from"./lodash.cb875ed5.js";import{_ as V}from"./entry.0f1f4d34.js";import"./ShopLayer.4b6bca95.js";import"./AppAnimate.vue_vue_type_script_setup_true_lang.c1c03cdc.js";import"./plus.c0ce5731.js";import"./close-bold.ada4cf83.js";import"./vuedraggable.03145536.js";import"./dayjs.3bf4ac2a.js";import"./sortablejs.91a11583.js";import"./uuid.d56aad75.js";import"./vue3-clipboard-es.62b9b053.js";import"./store.e5acb8cd.js";import"./04.e372062b.js";import"./link.a5c7efa8.js";import"./AppAnimate.vue_vue_type_script_setup_true_lang.2fe52f8d.js";import"./sYw7uX71Xe.38399cea.js";/* empty css                                                                  *//* empty css                                                                  */import"./copy-document.12769081.js";/* empty css                                                                       */const H={class:"chitu-tags-page page"},J={class:"content"},L={class:"type-list"},B={key:0,class:"tag-list"},D=["data-index"],X={key:0,class:"image-con"},Y={class:"text-con"},$={key:0,class:"en"},q={key:1,class:"en"},G={class:"button-con"},O=["onClick"],W=["onClick"],Z={key:1,class:"tag-list"},F=["data-index"],K={key:0,class:"image-con"},M={class:"text-con"},P={key:0,class:"en"},Q={key:1,class:"en"},R={class:"button-con"},ee=["onClick"],te=["onClick"],le={key:2,class:"tag-list"},ae=["data-index"],ne={key:0,class:"image-con"},oe={class:"text-con"},ie={key:0,class:"en"},se={key:1,class:"en"},ue={class:"button-con"},ce=["onClick"],re=["onClick"],pe=V(m({__name:"chitu",setup(m){const{copy:V}=s(),{addShop:pe}=u(),{TemplateApi:de}=c(),me=async e=>{const t=(await r(e,"$1vuEopxJgr")).data;return JSON.parse(t._rawValue)},ve=v([{name:"参考图",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_cankaotu.json")},{name:"人物",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huageren.json")},{name:"物体",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huagewuti.json")},{name:"构图",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_goutu.json")},{name:"画风",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_huafeng.json")},{name:"正面词组",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_zhengmiantag.json")},{name:"负面词组",file:me("https://raw.githubusercontent.com/easterCat/nuxt-utils-assets/main/json/NovelAI_fumiantag.json")}]),be=b([]),_e=b(0),ge=b(!0),fe=b(""),ye=b({}),he=b(!1),je=b(1),ke=b(50),xe=b();let Ce=[],Ne=0;const Ae=async()=>{const e=await de.getTemplatesChitu({pageIndex:je.value,pageSize:ke.value});be.value=[...be.value,...(null==e?void 0:e.templates)?e.templates:[]]},we=e=>{_e.value?(ye.value={author:e.author,n_prompt:e.n_prompt,preview:e.preview,model:e.model,prompt:e.prompt,prompt_zh:e.prompt_zh,name:e.name,desc:e.desc},he.value=!0):(ye.value={name:e.name,author:e.author,preview:e.imgbb_url?e.imgbb_url:e.preview,prompt:e.prompt,prompt_zh:e.prompt_zh,n_prompt:e.n_prompt,model:e.model,desc:e.desc,like:e.like},he.value=!0)},Ee=e=>{fe.value=e},Ie=()=>{be.value=be.value.concat(Ce.slice(50*Ne,50*(Ne+1)))},Se=T.throttle((()=>{const e=xe.value.scrollTop;xe.value.scrollHeight-(e+(document.documentElement.clientHeight||document.body.clientHeight))<=100&&(console.log("触底"),_e.value?(Ne++,Ie()):(je.value++,Ae()))}),1500);return _((async()=>{Ae(),xe.value=document.querySelector(".chitu-tags-page"),xe.value.addEventListener("scroll",Se)})),g((()=>{xe.value.removeEventListener("scroll",Se)})),(s,u)=>{const c=e,r=t,m=l,v=a,b=n,_=U.ElSwitch,g=o,T=U.ElTooltip,de=d,me=p,fe=i,ke=I("animate-css");return f(),y("div",H,[h(r,null,{default:j((()=>[h(c)])),_:1}),k("div",J,[h(m,{placeholder:"搜索标签",onSearchChange:Ee}),x(h(v,{title:"标签类别"},null,512),[[ke,{direction:"modifySlideInUp"}]]),k("div",L,[h(r,null,{default:j((()=>[(f(!0),y(w,null,E(N(ve),((e,t)=>x((f(),C(b,{key:t,index:t+"","button-style":1,"button-size":"larger",class:S([t===_e.value?"btn-accent":"btn-primary-30"]),"button-text":null==e?void 0:e.name,onSubmit:e=>(async e=>{Ne=0,je.value=1,(_e.value||0===_e.value)&&e?(_e.value=e,be.value=[],Ce=await ve[e].file,Ie()):(_e.value=0,be.value=[],Ae())})(t)},null,8,["index","class","button-text","onSubmit"])),[[ke,{direction:"modifySlideInUp",delay:30*t}]]))),128))])),_:1})]),x((f(),C(v,{title:"标签列表"},{titleSide:j((()=>[h(_,{modelValue:ge.value,"onUpdate:modelValue":u[0]||(u[0]=e=>ge.value=e),size:"large","inline-prompt":"","inactive-text":"隐藏Image","active-text":"开启Image",class:"title-side"},null,8,["modelValue"])])),_:1})),[[ke,{direction:"modifySlideInUp"}]]),N(Ne)?(f(),y("div",B,[h(r,null,{default:j((()=>[(f(!0),y(w,null,E(be.value,((e,t)=>{var l;return x((f(),y("div",{key:t,class:"tag-item-img ll-media bg-base-100","data-index":t},[ge.value&&5!==_e.value&&6!==_e.value?(f(),y("div",X,[(null==e?void 0:e.min_imgbb_url)?(f(),C(g,{key:0,src:null!=(l=null==e?void 0:e.min_imgbb_url)?l:"",placeholder:[100,50,10],loading:"lazy",onClick:t=>we(e)},null,8,["src","onClick"])):A("",!0)])):A("",!0),k("div",Y,[h(T,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:j((()=>[(null==e?void 0:e.title)?(f(),y("p",$,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(f(),y("p",q,z((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),k("div",G,[k("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:t=>N(pe)(null==e?void 0:e.promptEN)},[h(de)],8,O),k("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:t=>N(V)(null==e?void 0:e.promptEN)},[h(me)],8,W)])],8,D)),[[ke,{direction:"modifySlideInUp",delay:30*t}]])})),128))])),_:1})])):A("",!0),_e.value?(f(),y("div",Z,[h(r,null,{default:j((()=>[(f(!0),y(w,null,E(be.value,((e,t)=>x((f(),y("div",{key:t,class:"tag-item-img ll-media bg-base-100","data-index":t},[ge.value&&5!==_e.value&&6!==_e.value?(f(),y("div",K,[(null==e?void 0:e.fileUrl)?(f(),C(g,{key:0,src:null==e?void 0:e.fileUrl,placeholder:[100,50,10],loading:"lazy",onClick:t=>we(e)},null,8,["src","onClick"])):A("",!0)])):A("",!0),k("div",M,[h(T,{class:"box-item",effect:"dark",content:null==e?void 0:e.promptEN,placement:"top"},{default:j((()=>[(null==e?void 0:e.title)?(f(),y("p",P,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(f(),y("p",Q,z((null==e?void 0:e.promptEN.length)>24?(null==e?void 0:e.promptEN.slice(0,24))+"...":null==e?void 0:e.promptEN),1))])),_:2},1032,["content"])]),k("div",R,[k("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:t=>N(pe)(null==e?void 0:e.promptEN)},[h(de)],8,ee),k("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:t=>N(V)(null==e?void 0:e.promptEN)},[h(me)],8,te)])],8,F)),[[ke,{direction:"modifySlideInUp",delay:30*t}]]))),128))])),_:1})])):(f(),y("div",le,[(f(!0),y(w,null,E(be.value,((e,t)=>{var l;return f(),y("div",{key:t,class:"tag-item-img ll-media bg-base-100","data-index":t},[ge.value&&5!==_e.value&&6!==_e.value?(f(),y("div",ne,[(null==e?void 0:e.min_imgbb_url)?(f(),C(g,{key:0,src:null!=(l=null==e?void 0:e.min_imgbb_url)?l:"",placeholder:[100,50,10],loading:"lazy",onClick:t=>we(e)},null,8,["src","onClick"])):A("",!0)])):A("",!0),k("div",oe,[h(T,{class:"box-item",effect:"dark",content:null==e?void 0:e.prompt,placement:"top"},{default:j((()=>[(null==e?void 0:e.title)?(f(),y("p",ie,z((null==e?void 0:e.title.length)>24?(null==e?void 0:e.title.slice(0,24))+"...":null==e?void 0:e.title),1)):(f(),y("p",se,z((null==e?void 0:e.prompt.length)>24?(null==e?void 0:e.prompt.slice(0,24))+"...":null==e?void 0:e.prompt),1))])),_:2},1032,["content"])]),k("div",ue,[k("button",{class:"btn btn-sm btn-circle btn-accent m-r-10",onClick:t=>N(pe)(null==e?void 0:e.prompt)},[h(de)],8,ce),k("button",{class:"btn btn-sm btn-circle btn-secondary",onClick:t=>N(V)(null==e?void 0:e.prompt)},[h(me)],8,re)])],8,ae)})),128))]))]),h(fe,{modelValue:he.value,"onUpdate:modelValue":u[1]||(u[1]=e=>he.value=e),"current-template":ye.value},null,8,["modelValue","current-template"])])}}}),[["__scopeId","data-v-59bc8a6e"]]);export{pe as default};
