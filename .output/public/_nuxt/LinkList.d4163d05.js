import{J as e,K as a,_ as l,I as t,a_ as s,r as n,aT as i,x as o,aB as u,Y as d,aC as r,V as c,Z as v,u as p,ap as m,a4 as f,X as k,a2 as h,a0 as A,C as b,U as V,aX as y,aY as g,aZ as w}from"./entry.adfdc47f.js";import{u as C}from"./index.ccea3028.js";import{I as j,h as W,i as R,j as U,k as I,c as L,g as T,l as J,b as x}from"./element-plus.c3621afb.js";import{_ as F}from"./delete.6eaa8799.js";import"./FixMenu.vue_vue_type_style_index_0_scoped_5afae692_lang.0d334ce1.js";import"./lodash.ea4d81e6.js";const D={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},E=[l("path",{fill:"currentColor",d:"M832 512a32 32 0 1 1 64 0v352a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h352a32 32 0 0 1 0 64H192v640h640V512z"},null,-1),l("path",{fill:"currentColor",d:"m469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 1 0-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 0 1 0 135.808l-331.84 331.84a32 32 0 0 1-18.112 9.088L436.8 623.68a32 32 0 0 1-36.224-36.224l15.104-105.6a32 32 0 0 1 9.024-18.112l331.904-331.84a96 96 0 0 1 135.744 0z"},null,-1)];const M={name:"ep-edit",render:function(l,t){return e(),a("svg",D,E)}},N={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},S=[l("path",{fill:"currentColor",d:"M288 128h608L736 384l160 256H288v320h-96V64h96v64z"},null,-1)];const _={name:"ep-flag",render:function(l,t){return e(),a("svg",N,S)}},q=e=>(y("data-v-cdb9ab5a"),e=e(),g(),e),P={class:"link-con"},H={class:"link-left bg-base-100"},X={class:"link-right"},B=q((()=>l("div",{class:"right-linear"},null,-1))),Z={class:"part-list"},O=["data-title","data-index"],z={class:""},Q={class:"row"},G=["href"],K=["src"],Y={key:0,class:"hot-link"},$={class:"opeartion"},ee={key:0,class:"icon"},ae={key:1,class:"icon"},le=q((()=>l("div",{style:{float:"right"}},"(hot,prompt,online,other)",-1))),te={class:"dialog-footer"},se=w(t({__name:"LinkList",props:{filter:String},emits:["editEvent","deleteEvent"],async setup(t){let y,g;s().vueApp.provide(j,{prefix:Math.floor(1e3*Math.random()),current:0});const w=n(!1),{LinkApi:D}=C(),{links:E}=([y,g]=i((()=>D.getLinks())),y=await y,g(),y),N=n([{name:"",href:""}]),S=n([]),q=n(0);N.value=E,S.value=[...new Set(E.map((e=>e.link_type)))];const se=n(!1),ne=n(!1),ie=n(""),oe=n(),ue=n(""),de=n(""),re=n(""),ce=n(!1),ve=n(null),pe=async()=>{const{links:e}=await D.getLinks();N.value=e},me=()=>{ne.value=!0,ie.value="add"},fe=()=>{ne.value=!1,ie.value="",V((()=>{var e;null==(e=oe.value)||e.resetFields()}))},ke=()=>{"add"===ie.value&&he(),"edit"===ie.value&&Ae()},he=async()=>{if(200===(await D.addLink({name:ue.value,href:de.value,type:re.value,hot:ce.value})).code)return fe(),V((()=>{pe()})),L({showClose:!0,message:"新建成功",type:"success"})},Ae=async()=>{if(200===(await D.updateLink({name:ue.value,href:de.value,type:re.value,hot:ce.value,id:ve.value})).code)return fe(),V((()=>{pe()})),L({showClose:!0,message:"更新成功",type:"success"})};return o((()=>{const e=localStorage.getItem("edit");e&&(w.value=!0),e&&(se.value=!0)})),(t,s)=>{const n=_,i=W,o=M,y=F,g=T,C=R,j=J,E=U,he=x,Ae=I,be=u("scroll-to");return e(),a("div",P,[l("div",H,[l("ul",null,[(e(!0),a(d,null,r(p(S),((l,t)=>c((e(),a("li",{key:t,class:v({active:p(q)===t})},[m(f(l),1)],2)),[[be,{target:`.part:nth-child(${t+1}) > h2`,container:".link-right",behavior:"smooth",cb:e=>(e=>{q.value=e})(e||0===e?e:t)}]]))),128)),p(se)?(e(),a("button",{key:0,class:"btn-primary btn-block btn",onClick:me},"新增链接")):k("",!0)])]),l("div",X,[B,l("div",Z,[(e(!0),a(d,null,r(p(S),((t,s)=>{return e(),a("div",{key:t,id:"media",class:"part","data-title":t,"data-index":s},[l("h2",z,[l("strong",null,f(t),1)]),l("div",Q,[(e(!0),a(d,null,r((u=t,u?[...N.value.filter((e=>e.link_type===u))]:[]),((t,s)=>{var u;return e(),a("div",{key:s,class:"item bg-base-100"},[l("a",{href:null==t?void 0:t.href,target:"_blank"},[l("h3",null,[l("img",{src:null!=(u=null==t?void 0:t.icon)?u:p("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhBAMAAADMnc9JAAAAG1BMVEX///8AAACamprq6urR0dFOTk62trYsLCx2dnZWDjm5AAAEMUlEQVR42u2cTVMTQRCGN9lJNsdMQj6OWUspj+FTj0mpeHW56DFBSj2yWhTXBKX425pcVDIN07PdLxTM+wPy1Mx2v9PTPZAkUVFRUVFPVHs4VHr08qNda3B+eTpW5x1e2f91vj3R5O0W1qHjz1o8c20JHeusc9feol8KwHf2Vn0Xj6H39g71JmDgn2SZSQIPrMUiW9ZLA7GNNdZTPanwyX2JtiMDbFh//YDu6VojAeKURexVBzYtT1uViXMm0c7AS6wer1M2sWLwGD6w4iJrAcRqX7IIIW7pW/hNjaFxs9JZODEMWCF26oFEG3xQ7oQSz6CRWmVbjQ1WIDELJ46gubFSN4xYkkXb5fbp26Nn19If0tx5yTAvZD8kYXHDic/1ZyaXjTfuF5RJfJArU2d+F4SuWOBs/tJSLHScgTPwNd+elI27DHMpFayZ71mbSR0frlDtOzs8Uj6Xe8d8LpQehfdWOQu+tkjFMWTEWFckObqMcohfQrouHAvGJ++I+PiYEdZDiXQccu7tfGKN8Wnqfn7ILznIgE9FbG7uHzjuYJWwnAnLLdjEJec3cokLVsE58kSIJSenpxJElm9JEFOWNysR23DiGY8ocFg9KOJcgNhkVS65gJMbjq26XI59WqWselDkfCwZRm58S1vm2cG7MPArqyljmzKRerVR0Vb5TaQmIzkKy4ps358Z826aAY2AHe/TMRO6PzarOE7YpCX3NC1n7dgPIdY9l5jJtcnmfp7l7AMsgohp6RN5Tckusik8LvVz0RGdWe9Yb8YebPWTYO2ffHkT0EurMH8IbFBO9Iju5v1QDzgVbVoHtick5qzM5BcZXxN6RSyxrQU0CtPAkLa2xICe0cVRjZu01H1O4p2KMk87vFucqktcor8iGTZ9rSWW4iNkfi9UORfJyaSW3VCGGjaSq/IV1U7iDJ0ZZC6qhU3dog9iylEXCTg11NyGfCY0Rm+qWipSRXFHD2jgdX9L7xkpoRr4okEEzkiTmENTkQrVmSoRvkQDNVTiythTBbrSsatLbKDjxmEAgwRN7CsTp8huEUEcKRNz4NlPELUDZ7NW7WgTC3Sobl45unBiW5to0cQUWacSxIUy0TwAorbJNR8AcfboiPUnQIyKioqKUql2Tq4uLj49xwEPC8cfCWnqNfqoqqNPR4PsrKw1B00c6LJDPXpy2FiFrKy0+wCcP1BQuj4qd6zdbfkJeFOVm1aFBbeQ3dOVAfozqn7IGnrwSI3l2kCLUze6Aj1dTdDPAEii3rGcUq85wAZwH0T7iHY1hUfOPWRHadFvAZZwl5vDnbwGf9LRQj8CpixAs7IqwaFKhI5qUd6AP+pIwcWju9JRHs614M8B7mHi2UDPdDbcXH2JN6c6ak9k/9UBdk9X+voX+BPUmPuGBibJ/vofICn9o1fK7vb2kqioqKioJ6nfJt2wB3VsdPcAAAAASUVORK5CYII=")},null,8,K),l("span",null,f(t.name),1),(null==t?void 0:t.hot)?(e(),a("i",Y,[h(i,{color:"red"},{default:A((()=>[h(n)])),_:1})])):k("",!0)]),l("p",null,f((null==t?void 0:t.desc)?null==t?void 0:t.desc:"暂无描述"),1)],8,G),l("div",$,[p(w)?(e(),a("span",ee,[h(o,{onClick:e=>{return a=t,ue.value=a.name,de.value=a.href,re.value=a.link||a.link_type,ce.value=a.hot,ve.value=a.id,ne.value=!0,void(ie.value="edit");var a}},null,8,["onClick"])])):k("",!0),p(w)?(e(),a("span",ae,[h(y,{onClick:e=>(async e=>{if(200===(await D.deleteLink({id:e})).code)return V((()=>{pe()})),L({showClose:!0,message:"删除成功",type:"success"})})(null==t?void 0:t.id)},null,8,["onClick"])])):k("",!0)])])})),128))])],8,O);var u})),128))])]),h(Ae,{modelValue:p(ne),"onUpdate:modelValue":s[4]||(s[4]=e=>b(ne)?ne.value=e:null),title:"add"===p(ie)?"新增":"编辑",width:"600px","destroy-on-close":"","before-close":fe},{footer:A((()=>[l("span",te,[h(he,{onClick:fe},{default:A((()=>[m("取消")])),_:1}),h(he,{type:"primary",onClick:ke},{default:A((()=>[m("确定")])),_:1})])])),default:A((()=>[l("div",null,[h(E,{ref_key:"ruleFormRef",ref:oe,"label-width":"110px"},{default:A((()=>[h(C,{label:"链接名称"},{default:A((()=>[h(g,{modelValue:p(ue),"onUpdate:modelValue":s[0]||(s[0]=e=>b(ue)?ue.value=e:null)},null,8,["modelValue"])])),_:1}),h(C,{label:"链接"},{default:A((()=>[h(g,{modelValue:p(de),"onUpdate:modelValue":s[1]||(s[1]=e=>b(de)?de.value=e:null)},null,8,["modelValue"])])),_:1}),h(C,{label:"类别"},{default:A((()=>[h(g,{modelValue:p(re),"onUpdate:modelValue":s[2]||(s[2]=e=>b(re)?re.value=e:null)},null,8,["modelValue"])])),_:1}),le,h(C,{label:"热门"},{default:A((()=>[h(j,{modelValue:p(ce),"onUpdate:modelValue":s[3]||(s[3]=e=>b(ce)?ce.value=e:null)},null,8,["modelValue"])])),_:1})])),_:1},512)])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-cdb9ab5a"]]);export{se as default};
